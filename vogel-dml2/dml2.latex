% Einige zusätzliche Informationen für rubber
%  rubber erkennt nicht, dass die Datei weg kann, daher sagen wir es ihm
% rubber: clean $base.thm
%  rubber soll nach Änderungen an der Datei nochmal bauen
% rubber: watch $base.thm
% rubber: makeidx.tool      xindy
% rubber: makeidx.language  german-din

% scrreprt trifft am Besten die Bedürfnisse eines Skripts, das ganze wird
% zweiseitig (twoside), d.h. es wird zwischen linker und rechter Seite
% unterschieden, und wir verwenden zwischen den Absätzen einen Abstand
% von einer halben Zeile (halfparskip) und dafür keinen Absatzeinzug,
% wobei die letzte Zeile eines Absatzes zu min. 1/4 leer ist.

\documentclass[halfparskip*,german,draft,twoside]{scrreprt}

\usepackage[l2tabu]{nag}
\usepackage{ifthen}
\usepackage{makeidx}
\usepackage[final]{graphicx}
\usepackage{color}
\usepackage[draft=false,colorlinks,bookmarksnumbered]{hyperref}
\usepackage[latin1]{inputenc}
\usepackage[T1]{fontenc}
% \usepackage{nicefrac}
\usepackage{ae}

\usepackage[intlimits,leqno]{amsmath}
\usepackage{amscd}
\usepackage{amssymb}
\usepackage{helvet}
\usepackage{xspace}

\usepackage[amsmath,thmmarks,hyperref]{ntheorem}
\usepackage[warning,all]{onlyamsmath}
\usepackage{fixmath}     % ISO-konforme griech. Buchstaben

\usepackage{paralist}
\usepackage{ngerman}
\usepackage{wasysym}  % \lightning
\usepackage{svn}         % Zum Auswerten und ordentlichen Darstellen der
                         % SVN-Schlüsselwörter (s. vor \begin{document})
\usepackage{fancyvrb}

\theoremstyle{break}
\theorembodyfont{\normalfont}
\theoremheaderfont{\normalfont\bfseries}
\theoremnumbering{arabic}

% Die folgenden Umgebungen werden einzeln nummeriert und am Ende jedes
% Kapitels zurückgesetzt
\newtheorem{satz}{Satz}[chapter]
\newtheorem{bemerk}{Bemerkung}[chapter]
\newtheorem{defini}{Definition}[chapter]
\newtheorem{bsp}{Beispiel}[chapter]
\newtheorem{lemma}{Lemma}[chapter]

% Die folgenden Theoremumgebungen bekommen keine Nummer
\theoremstyle{nonumberbreak}
\newtheorem{fakt}{Fakt}

\theoremheaderfont{\scshape}
\theorembodyfont{\normalfont}
% Das Zeichen am Ende eines Beweises
\theoremsymbol{\ensuremath{_\blacksquare}}
% \theoremsymbol{q.\,e.\,d.}
\newtheorem{proof}{Beweis:}

% Hier die Definition, wie \autoref die Umgebungen nennen soll, die mit
% \newtheorem definiert wurden
\newcommand*{\satzautorefname}{Satz}
\newcommand*{\lemmaautorefname}{Lemma}
\newcommand*{\bemerkautorefname}{Bemerkung}
\newcommand*{\definiautorefname}{Definition}
\newcommand*{\bspautorefname}{Beispiel}
\newcommand*{\festlautorefname}{Festlegung}
\newcommand*{\proofautorefname}{Beweis}
% Zwischen Unter- und Unterunterabschnitten sollte nicht unterschieden
% werden.
\renewcommand*{\subsectionautorefname}{Abschnitt}
\renewcommand*{\subsubsectionautorefname}{Abschnitt}

\pagestyle{headings}

\newcommand*{\R}{\mathbb{R}}
\newcommand*{\C}{\mathbb{C}}
\newcommand*{\N}{\mathbb{N}}
\newcommand*{\Q}{\mathbb{Q}}
\newcommand*{\Z}{\mathbb{Z}}
\newcommand*{\K}{\mathbb{K}}
\newcommand*{\help}[1]{\textcolor{green}{help: #1}}
\newcommand*{\todo}[1]{\textcolor{blue}{todo: #1}}
\newcommand*{\edefine}{=_{df}}
\newcommand*{\define}{\Leftrightarrow_{df}} %\define nur in $ $ benutzen!
\newcommand*{\semaeq}{\mathrel|\joinrel=\joinrel\mathrel|} %semantische Aequivalenz
\newcommand*{\mminus}{\backslash} %Mengenrelation minus
\newcommand*{\floor}[1]{\lfloor #1 \rfloor}
\DeclareMathOperator{\sgn}{sgn} %Signum-Funktion
\DeclareMathOperator{\ggT}{ggT}
\DeclareMathOperator{\card}{card}

% Zum Markieren von wichtigen Begriffen. Diese sollen hervorgehoben
% und in den Index aufgenommen werden.
\newcommand*{\highl}[1]{\textbf{#1}\index{#1}}

\newcommand*{\obda}{o.\,B.\,d.\,A.\xspace}

% Schlüsselwörter in Algorithmen
\newcommand*{\schlwort}[1]{\underline{#1}}

\renewcommand*{\tilde}[1]{\widetilde{#1}}

\SVN $LastChangedRevision: 14 $
\SVN $LastChangedDate: 2006-05-08 09:41:28 +0200 (Mo, 08 Mai 2006) $

\makeindex

\begin{document}

\title{Diskrete Mathematik und Logik 2}
\author{Jörg Vogel}
\date{SS 2005}
\maketitle

\clearpage
\chapter*{Vorwort}
\begin{itshape}
  Dieses Skript ist im Rahmen des
  \href{http://www.minet.uni-jena.de/~joergs/skripte/}{Projekts
  "`Vorlesungsskripte der Fakultät für Mathematik und Informatik"'}
  entstanden und wird im Rahmen dieses Projekts weiter betreut. Das
  Skript ist nach bestem Wissen und Gewissen entstanden. Denoch
  garantiert weder der auf der Titelseite genannte Dozent, noch die
  Mitglieder des Projekts für dessen Fehlerfreiheit. Für etwaige Fehler
  und dessen Folgen wird von keiner der genannten Personen eine Haftung
  übernommen. Es steht jeder Person frei, dieses Skript zu lesen, zu
  verändern oder auf anderen Medien verfügbar zu machen, solange ein
  Verweis die Internetadresse
  \url{http://www.minet.uni-jena.de/~joergs/skripte/} des Projekts
  enthalten ist.

  Diese Ausgabe trägt die Versionsnummer~\SVNLastChangedRevision\ und ist
  vom \SVNDate. Eine (mögliche) aktuellere Ausgabe ist auf der Webseite
  des Projekts verfügbar.

  Jeder ist dazu aufgerufen Verbesserungen, Erweiterungen und
  Fehlerkorrekturen für das Skript einzureichen bzw. zu melden oder diese
  selbst einzupflegen -- einfach eine E-Mail an die
  \href{mailto:skripte@listserv.uni-jena.de}{Mailingliste
  \texttt{<skripte@listserv.uni-jena.de>}} senden. Weitere Informationen
  sind unter der oben genannten Internetadresse verfügbar.

  Hiermit möchten wir allen Personen, die an diesem Skript mitgewirkt
  haben, vielmals danken:
  \begin{itemize}
   \item \href{mailto:kabel@cat0.de}{Matti Bickel
    \texttt{<kabel@cat0.de>}} (2005)
   \item \href{mailto:joerg@alea.gnuu.de}{Jörg Sommer
    \texttt{<joerg@alea.gnuu.de>}} (2006)
  \end{itemize}
\end{itshape}

\pdfbookmark[0]{Inhaltsverzeichnis}{inhaltsverzeichnis}
\tableofcontents
\clearpage

\chapter{Aussagenlogik}
\section{Einführung}

Prädikatenlogik: unser Schwerpunkt: 
Sprachen der Prädikatenlogik - als Beschreibungssprachen mathematischer
Strukturen (jede Struktur hat ihre Sprache , die durch die Signatur bestimmt
wird)

Aussagenlogik: unser Schwerpunkt:
\begin{itemize}
\item logische Regeln/ Verknüpfungen und die Regeln des Schlussfolgerns
\item Test auf Erfüllbarkeit: 
   \begin{bsp}Verifikation von Schaltkreisen
      \begin{itemize}
	 \item Spezifikation $S$ eines Schaltkreises
	 \item Realisierung $R$ eines Schaltkreises
      \end{itemize}
   $S$ und $R$ lassen sich beschreiben durch 0-1-wertige Funktionen (Boolsche 
   Funktionen) $f_{s}$ und $f_{r}$\\
   Frage: Stimmen die beiden Funktionen überein?\\
   Fakt: $f_s\ =\ f_{r}\ \Leftrightarrow\ f_{s}\ \oplus\ f_{r}\ =\ 0$\\
   Test: Ist $f_{s}\ \oplus\ f_{r}$ unerfüllbar?\\
   Antwort "`ja"': Realisierung $R$ wie gewünscht.\\
   Antwort "`nein"': Realisierung ändern.
   \end{bsp}
\end{itemize}

\section{Syntax und Semantik der Aussagenlogik}

Zunächst \underline{nicht formal}:\\
Eine Aussage ist ein sprachliches Gebilde, von dem es sinnvoll ist zu sagen, 
dass es entweder \underline{wahr} oder \underline{falsch} ist.

\subsection{Prinzip der Zweiwertigkeit}
\begin{bsp}
\item
\begin{tabular}{ll}
Es gibt unendlich viele Primzahlen & \underline{wahr}\\
Es gibt unendlich viele gerade Primzahlen & \underline{falsch}\\
Es gibt unendlich viele Primzahlzwillinge & \underline{???}\\
Diese Aussage ist falsch. & \underline{keine Aussage}\\
Diese Aussage ist keine Aussage & \underline{falsch}\\
"`Ist dies eine Aussage"' & \underline{keine Aussage}
\end{tabular}
\end{bsp}

\subsection{Schlüsse ziehen}
\begin{bsp}
Im Supermarkt stehen 136 Apfelsinenkisten, jede Kiste enthählt mindestens 
140 Apfelsinen und höchstens 166 Apfelsinen.\\
Dann gibt es min. 6 Kisten mit der gleichen Anzahl Apfelsinen.\\
(\emph{Schubkastenprinzip}: Existenzbeweis)\\
Dies ist ein Beispiel für einen korrekten Schluss.

Alle Senatoren sind alt.\\
Alle Achtziger sind Senatoren.\\
Also sind alle Achtziger alt.\\
\emph{Korrekter} Schluss, obwohl die Prämissen falsch sind und die Konklusion
wahr ist.

Einige Senatoren sind alt.\\
Einige Generäle sind Senatoren.\\
Einige Generäle sind alt.\\
Dieser Schluss ist \emph{nicht} korrekt.
\end{bsp}

\subsection{Aussagenverknüpfung}
In der Aussagenlogik werden Aussageverbindungen durch logische Junktoren
beschrieben.
\begin{bsp}
"`Erfurt ist die Hauptstadt Thüringens."' \emph{und} "`$7=<3$"'
\end{bsp}

\subsection{Prinzip der Extensionalität}
Der Wahrheitswert einer Aussageverbindung hängt allein von den Wahrheitswerten
der (Teil-)Aussagen ab - und nicht von deren Inhalten.

\subsection{Syntax der Prädikatenlogik}
zweifache Reduktion
\begin{enumerate}
\item Aussagen werden ersetzt durch Platzhalter: Aussagevariablen;\\
Bezeichnung: $A,B,C,D,\dots$ (eventuell mit Indizes)\\
\emph{Bemerkung}:Feinstruktur der Aussagen geht verloren
\item Aussageverbindungen werden durch logische Junktoren ersetzt.
   \begin{bsp}
      $A$ und $B$, sowohl $A$ als auch $B$, $A$ aber auch $B$ $\Rightarrow$
      \emph{Konjunktionen}\\
      $A$ gdw. $B$, $A$ dann und nur dann $B$ $\Rightarrow$ \emph{Bijunktionen}\\
      wenn $A$, dann $B$, $A$ hat $B$ zur Folge $\Rightarrow$ \emph{Implikation}\\
   \end{bsp}
\emph{Bemerkung}: Durch diese Reduktionen wird die logische Struktur von
zusammengesetzten Aussagen (Formeln) betont.
\end{enumerate}
Zeichenvorrat: Wir brauchen zwei Sorten von Zeichen:
\begin{itemize}
   \item Aussagevariablen: $A$,$B$,$C$,$D$
   \item logische Junktoren: $\wedge\,,\vee\,,\rightarrow\,,\leftrightarrow\,,\neg$
   \item Hilfssymbole: ( , )
\end{itemize}

\begin{defini}[induktive Definition der Syntax der Aussagenlogik]
Induktionsanfang: Jede Aussagenvariable ist eine Aussagenlogische Formel

Induktionsschritt: Falls $F$ und $G$ bereits aussagenlogische Formeln
sind, dann sind auch 
\begin{itemize}
   \item $(F\,\wedge\,G)$ Konjunktion
   \item $(F\,\vee\,G)$ Disjunktion
   \item $(F\,\rightarrow\,G)$ Implikation
   \item $(F\,\leftrightarrow\,G)$ Bijektion
   \item $(\neg\,F)$ Negation
\end{itemize}
aussagenlogische Formeln

Schluss: Sonst gibt es keine Formeln
\end{defini}

Vereinbarungen:
\begin{enumerate}
   \item $\mathcal{A}$ bezeichnet die Menge aller Aussagenvariablen
   \item aussagenlogische Formeln bezeichnen wir durch $F$, $G$, $H$ (mit
eventuellen Indizes)
   \item Mengen von aussagenlogischen Formeln bezeichnen wir durch $X$, $Y$, $Z$
(eventuell mit Indizes)
   \item Sprechweise: Aussagevariablen heißen \highl{Atome}.
   \item Klammereinsparungsregeln:
      \begin{itemize}
	 \item Außenklammern weglassen
	 \item Bindungsstärke der Junktoren ist von links nach rechts mit abnehmender
	 Priorität: $\neg,\,\{\wedge,\,\vee\},\,\rightarrow,\,\leftrightarrow$
      \end{itemize}
   \item Sprechweise: $F$ heißt Teilformel von $G$ $\leftrightarrow$
      \begin{enumerate}
	 \item $F$ und $G$ sind Formel
	 \item $F$ ist ein Teilwort von $G$
      \end{enumerate}
   \emph{Beispiel}: Alle Teilformeln von $(A\,\rightarrow\,(B\vee\,\neg B))$
   sind: $A$, $B$, $\neg B$, $(B\vee\,\neg B)$, $(A\,\rightarrow\,(B\vee\,\neg
   B))$
\end{enumerate}

Die Menge der Wahrheitswerte bzw. Boolschen Werte wird bezeichnet durch
$B=\{0,1\}$\\
Dabei steht 0 für "`falsch"' und 1 für "`wahr"'.

\begin{defini}[induktive Definition der Semantik]
Eine Belegung $\beta$ der Variablen aus $\mathcal{A}$ ist eine Abbildung
$\beta\colon \mathcal{A} \mapsto B$\\
($\beta$ ordnet jedem Atom einen Wahrheitswert zu)
\item Eine Interpretation $I_{\beta}$ der Formeln ist induktiv wie folgt
definiert:
\begin{description}
   \item[IA] $I_{\beta}(A) = \beta(A)$ für alle $A \in \mathcal{A}$
   \item[IS] Falls $I_{\beta}(F)$ und $I_{\beta}(G)$ bereits gegeben sind, dann
ist\\
      \begin{enumerate}
	 \item $I(F\wedge G) := \min\{I_{\beta}(F),\, I_{\beta}(G)\}$
	 \item $I(F\vee G) := \max\{I_{\beta}(F),\, I_{\beta}(G)\}$
	 \item $I(F\rightarrow G) = 1\ gdw.\ I_{\beta}(F) \leq I_{\beta}(G)$
	 \item $I(F\leftrightarrow G) = 1\ gdw.\ I_{\beta}(F) = I_{\beta}(G)$
	 \item $I(\neg F) = 1-I_{\beta}(F)$
      \end{enumerate}
\end{description}
\end{defini}

\section{Modelle, Äquivalenzen, Normalformen}
\begin{defini}
Es sei $F$ eine Formel und $\beta$ eine Belegung von $F$.
\item
\begin{enumerate}
\item $\beta$ heißt \highl{Modell} von $F$ $\Leftrightarrow$ $I_{\beta}(F) = 1$
\item $F$ heißt \emph{erfüllbar} $\Leftrightarrow$ $F$ besitzt ein Modell
\item $F$ heißt gültig oder \highl{Tautologie} $\Leftrightarrow$ jede
Belegung ist ein Modell von $F$
\item $F$ heißt \emph{unerfüllbar} $\Leftrightarrow$ jede Belegung ist kein
Modell von $F$ bzw. $F$ besitzt kein Modell.
\end{enumerate}
\end{defini}

Bezeichnungen:\\
\begin{tabular}{ll}
$\mathcal{L}_{AL}(\mathcal{A})$ & bezeichnet die Menge aller
aussagenlogischen Formeln mit der Menge der Atome $\mathcal{A}$.\\
$SAT$ & Menge aller erfüllbaren Formeln\\
$TAUT$ & Menge aller Tautologien\\
$\overline{SAT}$ & Menge aller unerfüllbaren Formeln
\end{tabular}

\begin{defini}
Es seien $F$ und $G$ Formeln.\\
$F$ und $G$ heißen \highl{semantisch äquivalent} $\Leftrightarrow$ für alle
Belegungen stimmen die Wahrheitswerte von $F$ und $G$ überein:
$I_{\beta}(F)=I_{\beta}(G)$
\item Schreibweise: $(F\models G) \wedge (G\models F)$ 
\item Frage: Was hat "`semantische Äquivalenz"' mit der Bijunktion
"`$\leftrightarrow$"' zu tun?\\
"`$\leftrightarrow$"': Formel vs. "`$\semaeq$"': keine Formel, Aussage über Formel
\end{defini}

\begin{satz}
$F$ und $G$ Formeln.\\
$F \semaeq G$ gdw. $(F\leftrightarrow G) \in\,TAUT$

\begin{proof}
$F \semaeq G$ \\
$\Leftrightarrow$ für alle Belegungen $\beta$ gilt: $I_\beta(F)=I_\beta(G)$\\
$\Leftrightarrow$ für alle Belegungen $\beta$ gilt: $I_\beta(F\leftrightarrow G)=1$\\
$\Leftrightarrow$ $(F\leftrightarrow G) \in TAUT$
\end{proof}
\end{satz}

\emph{Beobachtung}: Jede Formel definiert eine Boolsche Funktion $f$.\\
Es seien $A_1, \ldots, A_n$ Atome in der Formel F.\\
Schreibweise: $F(A_1,\ldots,A_n)$\\
Ein solches $F$ definiert eine n-stellige boolsche Funktion 
\begin{displaymath} f_F\colon\quad \{0,1\}^n \mapsto \{0,1\}, \end{displaymath}
wobei gilt: $f_F(x_1,\ldots,x_n)=y \Leftrightarrow $ für $\beta(A_1)=x_1$
und $\beta(A_2)=x_2$ und $\ldots$ und $\beta(A_n)=x_n$ gilt:
\begin{displaymath} I_\beta(F)=y \end{displaymath}

\begin{fakt}
$F$ äq. $G$ $\Leftrightarrow$ $f_F=f_G$
\end{fakt}

\emph{Fazit}: Die semantische Äquivalenz "`$\semaeq$"' ist eine
\highl{Äquivalenzrelation}
auf der Menge $\mathcal{L}(\mathcal{A})$

\begin{satz}[Regeln für semantisch äquivalentes umformen]
Für Formeln $F,G,H$ gilt:
\item $(F\wedge G) \semaeq (G\wedge F)$, Disjunktion und Bijunktion genauso
(Kommutivität)
\item $(F \wedge G)\wedge H) \semaeq F \wedge (G\wedge H)$, Disjunktion genauso
(Assozivität)
\item $\begin{array}{l} F\wedge (F\vee G) \semaeq F\\ 
F\vee (F\wedge G) \semaeq F\end{array}\Bigg\}$ Absorbtion
\item $\neg\neg F \semaeq F$ (doppelte Negation)
\item $\begin{array}{l}\neg(F\wedge G) \semaeq \neg F\vee \neg G \\
\neg(F\vee G) \semaeq \neg F\wedge \neg G\end{array}\Bigg\}$ de Morgansche Regeln
\item $\begin{array}{l}F\wedge (G\vee H) \semaeq (F\wedge G)\vee (F\wedge H)\\
F\vee (G\wedge H) \semaeq (F\vee G)\wedge (F\vee H)\end{array}\Bigg\}$
Distributiviät
\item $\begin{array}{l}F \in TAUT\,\colon\quad F\wedge G \semaeq G\\
F \in TAUT\,\colon\quad F\vee G \semaeq F\end{array}\Bigg\}$ Tautologieregeln
\item $\begin{array}{l}F \in \overline{SAT}\,\colon\quad F\wedge G \semaeq F\\
F \in \overline{SAT}\,\colon\quad F\vee G \semaeq G\end{array}\Bigg\}$
Unerfüllbarkeitsregeln
\item $F\wedge F \semaeq F$ und $F\vee F \semaeq F$ (Idempotenzregeln)
\end{satz}

\begin{satz}[Ersetzbarkeitstheorem]
Es seien $F,E$ zwei semantisch äquivalente Formeln.\\
$G$ sei eine Formel, die $F$ als Teilformel enthält.\\
$H$ sei eine Formel, die entsteht wenn irgendein Vorkommen von $F$ in $G$ durch
$E$ ersetzt wird.\\
Dann ist \begin{displaymath} G \semaeq H\end{displaymath}
\begin{proof}
durch Formelinduktion, wollen zeigen: alle Formeln $G \in
\mathcal{L}_{AL}(\mathcal{A})$ besitzen die "`Ersetzbarkeitseigenschaft"'.
\item[IA]: Es sei $G=A$ ein Atom $(A\in \mathcal{A})$.\\
Dann gilt $F=A$ und damit $F=G$ und deshalb gilt: $G=F \semaeq E=H$
\item[IS]: Es sei $G$ eine zusammengesetzte Formel.\\
\begin{description}
\item[1. Fall] Es sei $F=G$. Dann gilt wieder $G=F \semaeq E=H$
\item[2. Fall] Es sei $F$ eine echte Teilformel von $G$.
\begin{description}
\item[2.1] Es sei $G=(G_1\wedge G_2)$ eine \emph{Konjunktion}\\
Nach Induktionsvorraussetzung besitzen $G_1,_2$ bereits die
Ersetzungseigenschaft. Da $F$ eine \underline{echte} Teilmenge von $G$ ist, ist
$F$ eine Teilformel von $G_1$ oder $G_2$.
\begin{description}
\item[Fall a] $F$ sei Teilformel von $G_1$\\
$H_1$ sei eine Formel die durch Ersetzung von $F$ durch $E$ aus $G_1$ entsteht.
Dann $G_1 \semaeq H_1$. Dann gilt:\\
$H=(H_1\wedge G_2)$ und \\
$I_\beta(H)=\,\min\{I_\beta(H_1),I_\beta(G_2)\}=\,\min\{I_\beta(G_1),
I_\beta(G_2)\}=I_\beta(G)$\\
$\Rightarrow H \semaeq G$
\item[Fall b] $F$ sei Teilformel von $G_2$: s. Fall a
\end{description}
\item[2.2] Es sei $G=(G_1\vee G_2)$ eine Disjunktion. Schluss wie bei 2.1
\item[2.3] Es sei $G=(G_1\rightarrow G_2)$ eine Implikation.\\
$F$ ist eine Teilformel von $G_1$ oder $G_2$.
\begin{description}
\item[Fall a] Sei $F$ Teilformel von $G_1$ und $H_1$ die Formel, die durch
Ersetzung von $F$ durch $E$ aus $G_1$ entsteht: dann gilt $G_1 \semaeq H_1$.\\
Weiter ist $H=(H_1\rightarrow G_2)$ und es gilt:\\
$I_\beta(H)=1 \Leftrightarrow I_\beta(H_1)\leq I_\beta(G_2) \Leftrightarrow
I_\beta(G_1)\leq I_\beta(G_2) \Leftrightarrow I_\beta(G)=1$\\
$\Rightarrow H \semaeq G$
\item[Fall b] wie oben mit $F$ Teilformel von $G_2$
\end{description}
\item[2.4] Es sei $G=(G_1\leftrightarrow G_2)$: wie 2.3
\item[2.5] Es sei $G=\neg G'$ eine Negation\\
Dann ist $F$ eine Teilformel von $G'$ und $H'$ sei eine Formel, die durch
Ersetzung von $F$ durch $E$ aus $G'$ entsteht.\\
Nach Induktionsvorraussetzung ist $G' \semaeq H'$ und damit:\\
$I_\beta(H)=1-I_\beta(H')=1-I_\beta(G')=I_\beta(G)$ (da $H=\neg H'$)\\
$\Rightarrow$ $H \semaeq G$
\end{description}
\end{description}
\end{proof}
\end{satz}

\subsection{Disjunktive und konjunktive Normalform}
\begin{defini}
\begin{enumerate}
\item Jedes Atom $A \in \mathcal{A}$ heißt \highl{positives Literal}\\
Jede Negation $\neg A$ heißt \highl{negatives Literal}
\item Eine Formel der Gestalt
\begin{displaymath} (L_{11}\wedge L_{12}\wedge \ldots \wedge L_{1n_1})\vee
(L_{21}\wedge L_{22}\wedge \ldots \wedge L_{2n_2})\vee \ldots \vee (L_{m1}\wedge
L_{m2}\wedge \ldots \wedge L_{mn_m})\end{displaymath}
oder kurz: $\bigvee_{i=1}^{m}(\bigwedge_{j=1}^{n_i} L_{ij})$, heißt
\highl{disjunktive Normalform} (\highl{DNF})
\item Eine Formel der Gestalt
\[\bigwedge_{i=1}^{m}(\bigvee_{j=1}^{n_i}L_{ij})\]
wobei alle $L_{ij}$ Literale sind, heißt \highl{konjunktive Normalform}
(\highl{KNF})
\end{enumerate}
\end{defini}

\begin{satz}
Zu jeder Formel $F$ gibt es eine semantisch äquivalente Formel in DNF ($F_D$)
und eine semantisch äquivalente Formel in KNF ($F_K$)
\begin{proof}[durch Formelinduktion]
wir beweisen simultan: jede Formel $F$ besitzt "`DNF"' und "`KNF"'
\item[IA]: Es sei $F=A$ ein Atom. Dann ist $F$ ein Literal $L_{11}$ und somit in
[D|K]NF
\item[IS]: Es sei $F$ eine zusammengesetzte Formel.
\begin{description}
\item[Fall a]
Es sei $F$ eine Negation $F=\neg F'$. $F'$ erfüllt die
Induktionvorraussetzung und besitzt deshalb [D|K]NF.\\
Es sei $F_D'=\bigvee_{i=1}^{m}(\bigwedge_{j=1}^{n_i}L_{ij})$.\\
Dann gilt: 
\begin{eqnarray*}
F = \neg F_D' & = & \neg (\bigvee_{i=1}^{m}(\bigwedge_{j=1}^{n_i}L_{ij})\\
& \semaeq & \bigwedge_{i=1}^{m}(\neg (\bigwedge_{j=1}^{n_i}L_{ij})\\
& \semaeq & \bigwedge_{i=1}^{m}(\bigvee_{j=1}^{n_i}\neg L_{ij})\\
& \semaeq & \bigwedge_{i=1}^{m}(\bigvee_{j=1}^{n_i}\overline{L_{ij}})
\end{eqnarray*}
wobei $\overline{L_{ij}} = \Bigg\{\begin{array}{l}\neg A\textrm{, falls }
L_{ij}=A\\ A\textrm{, falls }L_{ij}=\neg A\end{array}$\\
Dies ist eine Formel in KNF.
Ähnlich $F_K'$: liefert eine zu $F$ semantisch äquivalente Formel in DNF.
\item[Fall b]
Es seien $F=(F'\wedge F'')$ eine Konjunktion. $F'$ und $F''$ erfüllen die IV 
und so gilt $F' \semaeq F_D'$ in DNF und $F' \semaeq F_K'$ in KNF und $F'' \semaeq
F_D''$ ind DNF und $F'' \semaeq F_K''$ in KNF.\\
Zunächst 
\begin{enumerate}
\item KNF für $F$: $(F_K' \wedge F_K'')$ ist in KNF und es gilt: $F=(F'\wedge
F'') \semaeq (F_K'\wedge F_K'')$
\item semantisch äquivalente DNF für $F$: wir gehen aus von $F_D' \semaeq F'$
und $F_D'' \semaeq F''$\\
$F_D'$ hat die Gestalt $\bigvee_{i=1}^{m'}G_i$, dabei ist
$G_i=\bigwedge_{j=1}^{n_i}L_{ij}$ und $F_D''$ hat die Gestalt
$\bigvee_{k=1}^{m''} H_k$, dabei ist $H_k=\bigwedge_{j=1}^{n_k}L_{ij}$ und es
gilt (mit Distributivgesetz):
\begin{eqnarray*}
F=(F'\wedge F'') & \semaeq & F_D'\wedge F_D''=(\bigvee_{i=1}^{m'}G_i)\wedge
(\bigvee_{k=1}^{m''} H_k)\\
& \semaeq & \bigvee_{i=1}^{m'}\Big(G_i \wedge (\bigvee_{k=1}^{m''} H_k)\Big)\\
& \semaeq & \bigvee_{i=1}^{m'}\Big(\bigvee_{k=1}^{m''}(\underbrace{G_i\wedge
H_k}_{\textrm{Konjugation von Literalen}})\Big)
\end{eqnarray*}
Dies ist eine DNF.
\end{enumerate}
\item[Fall c] Disjunktionen: Es sei $F=(G\vee H)$.\\
Es gilt: $F \semaeq \neg \neg (G\vee H) \semaeq \neg (\neg G \wedge \neg H)$\\
Weiter wie in Fall a und b.
\item[Fall d] Implikation: Es sei $F=(G\rightarrow H)$.\\
Dann ist $F \semaeq \neg G \vee H$. Weiter wie Fall c.
\item[Fall e] Bijunktionen: Es sei $F=(G\leftrightarrow H)$.\\
Dann ist $F \semaeq (G\wedge H)\vee (\neg G \wedge \neg H)$. Weiter wie in Fall
a, b, c.
\end{description}
\end{proof}
\end{satz}

Der Beweis ist zugleich Nachweis der Korrektheit des folgenden Algorithmus.
\subsubsection{1. Verfahren zur Bestimmung der Normalform}
\begin{description}
\item[1. Schritt:] Ersetze alle "`$\leftrightarrow$"' gemäß
$G\leftrightarrow H \semaeq (G\rightarrow H)\wedge (H\rightarrow G)$
\item[2. Schritt:] Ersetze alle Pfeile "`$\rightarrow$"' gemäß
$(G\rightarrow H) \semaeq (\neg G \vee H)$\\
Nun ergibt sich eine Formel, die nur aus Konjunktionen und Disjunktionen
besteht.
\item[3. Schritt:] Negation "`nach innen"' ziehen, gemäß $\neg(G\wedge H)
\semaeq \neg G \vee \neg H$ und $\neg (G\vee H) \semaeq \neg G \wedge \neg H$
\item[4. Schritt:] \begin{description} \item[a] für eine KNF:\\
Disjunktionen nach "`innen"' ziehen, gemäß $F\vee(G\wedge H) \semaeq (F\vee
G)\wedge (F\vee H)$
\item[b] für eine DNF:\\
Konjunktionen nach "`innen"' ziehen, gemäß $F\wedge (G\vee H) \semaeq
(F\wedge G)\vee (F\wedge H)$
\end{description}
Nach Schritt 4 ergibt sich eine Formel in KNF/DNF
\item[5. Schritt:] Kürzen
\begin{description}
\item[a] für KNF
\begin{description}
\item[a.1] $\ldots \wedge (A\vee B\vee \ldots \vee B\vee B\vee A)\wedge \ldots
\semaeq \ldots \wedge (A\vee B)\wedge \ldots$ lasse alle Mehrfachvorkommen in
Disjunktionen weg.
\item[a.2] $\ldots \wedge(A\vee \ldots \vee \neg A)\wedge \ldots \semaeq w$
streiche komplette Klammer, da Tautologie.
\end{description}
\item[b] für DNF
\begin{description}
\item[b.1] genauso wie 5.a.1 gemäß Idempotenzregel.
\item[b.2] $\ldots \vee(A\wedge \ldots \wedge \neg A)\vee \ldots$ komplette
Klammer weglassen, da Konjunktion immer falsch.
\end{description}
\end{description}
Schreibweise: $w := A\vee \neg A$ und $f := A\wedge \neg A$\\
$w$ und $f$ sind \emph{keine} Formeln, sondern Abkürzungen für Formeln.
\end{description}

\subsubsection{2. Verfahren zur Bestimmung der Normalform}
Ausgangspunkt für dieses Verfahren ist die Wahrheitswerttabelle.\\
Es sei $F(A_1,\ldots,A_n)$ eine Formel.
Wahrheitswerttabelle für $f_F$:\\
\begin{tabular}{cccccc}
& $\beta(A_1)$ & $\beta(A_2)$ & $\ldots$ & $\beta(A_n)$ & $I_\beta(F)$\\
Zeile 0 & 0 & $\ldots$ & 0 &\\
$\vdots$ & & & &$\vdots$\\
Zeile j & $x_1$ & $x_2$ & $\ldots$ & $x_n$ & $y$\\
$\vdots$ & & & & $\vdots$\\
Zeile $2^n-1$ & 1 & 1 & $\ldots$ & 1 &
\end{tabular}

Wir definieren zwei Mengen:\\
$E:=\big\{(x_1,\ldots,x_n) \in \{0,1\}^n | \textrm{ wenn }\beta(A_1)=x_1 \textrm{ und }
\beta(A_2)=x_2 \textrm{ und } \ldots \textrm{ und } \beta(A_n)=x_n \textrm{ dann
ist } I_\beta(F)=1\big\}$\\
$N:=\big\{(x_1,\ldots,x_n) \in \{0,1\}^n | \textrm{ wenn }\beta(A_1)=x_1 \textrm{ und }
\beta(A_2)=x_2 \textrm{ und } \ldots \textrm{ und } \beta(A_n)=x_n \textrm{ dann
ist } I_\beta(F)=0\big\}$\\
Klar ist: $E \cap N = \varnothing$ und $E \cup N = \{0,1\}^n$\\
$E$ und $N$ bilden eine Zerlegung der Menge aller 0-1-Tupel.\\
Für
\begin{description}
\item[DNF:] für $(x_1,\ldots,x_n)\in \{0,1\}^n$ definieren wir:
\begin{gather*} A_1^{x_1}\wedge A_2^{x_2} \wedge \ldots \wedge
A_n^{x_n} \textrm{ durch }\\
A_i^{x_i}:= \Bigg\{\begin{array}{l}A_i \textrm{ falls }x_i=1\\\neg A_i \textrm{
falls }x_i=0\end{array}
\end{gather*}
\emph{Bemerkung}: $A_i^{x_i}$ ist stets ein Literal und eine Formel der obigen
Gestalt heißt \highl{Elementarkonjunktion}.

\begin{fakt} $I_\beta(A_i^{x_i})=1 \Leftrightarrow \beta(A_i)=x_i \textrm{ und
damit } I(A_1^{x_1}\wedge A_2^{x_2}\wedge \ldots \wedge A_n^{x_n})
\Leftrightarrow \bigwedge_{1\leq i \leq n}\beta(A_i)=x_i$\\
Also: $F \semaeq \bigvee_{(x_1,\ldots,x_n)\in E}(A_1^{x_1}\wedge \ldots \wedge
A_n^{x_n})$.\\
Eine solche DNF heißt \highl{kanonische DNF (DKNF)}
\end{fakt}

\item[KNF:] für $(x_1,\ldots,x_n)\in \{0,1\}^n$ definieren wir:
\begin{gather*} A_1^{\overline{x_1}}\vee A_2^{\overline{x_2}} \vee \ldots \vee
A_n^{\overline{x_n}} \textrm{ durch }\\
A_i^{\overline{x_i}}:= \Bigg\{\begin{array}{l}\neg A_i \textrm{ falls }x_i=1\\ A_i \textrm{
falls }x_i=0\end{array}
\end{gather*}
\emph{Bemerkung}: $A_i^{\overline{x_i}}$ ist ein Literal und eine Formel der obigen
Gestalt heißt Elementarkonjunktion.

\begin{fakt} $I_\beta(A_i^{\overline{x_i}})=0 \Leftrightarrow \beta(A_i)=x_i \textrm{ und
damit } I(A_1^{\overline{x_1}}\vee A_2^{\overline{x_2}}\vee \ldots \vee
A_n^{\overline{x_n}}) =0 \Leftrightarrow \beta(A_1)=x_i \textrm{ und } \ldots
\textrm{ und } \beta(A_n)=x_n$\\
Also: $F \semaeq \bigwedge_{(x_1,\ldots,x_n)\in N}(A_1^{\overline{x_1}}\vee \ldots
\vee A_n^{\overline{x_n}})$.\\
Eine solche KNF heißt \highl{kanonische KNF (KKNF)}
\end{fakt}
\end{description}

\subsubsection{Codenummern von Wahrheitswertfunktionen}
Es sei $f\colon \{0,1\}^n \mapsto \{0,1\}$ (d.\,h. $f$ n-stellige Funktion, n fix)\\
Wahrheitswertabelle:
\begin{tabular}{cccccc}
& $x_1$ & $x_2$ & \ldots & $x_n$ & $f(x_1,x_2,\ldots,x_n)$\\
Zeile 0: & 0 & 0 & \ldots & 0 & $y_0$\\
\vdots & & & \vdots & \vdots & \vdots\\
Zeile $i$ & $x_1^*$ & $x_2^*$ & \ldots & $x_n^*$ & $y_i$\\
\vdots & & & \vdots & \vdots & \vdots\\
Zeile $2^n-1$ & 1 & 1 & \ldots & 1 & $y_{2^n-1}$
\end{tabular}\\
Dann gilt: \\
$\begin{array}{lll}i & = & x_1^*\cdot 2^{n-1}+x_2^*\cdot 2^{n-2}+\ldots +x_{n-1}^*\cdot 2^1+
x_n^*\cdot 2^0\\
& = & \sum_{j=1}^n (x_j^*\cdot 2^{n-j})
\end{array} $
$f$ ist festgelegt durch die Eintragungen $y_0,y_1, \ldots, y_{2^n-1}$ und wir
definieren für dieses n-stellige $f$
\begin{defini}
\[ \textrm{Code}(f) := \sum_{k=0}^{2^n-1}(y_k\cdot 2^k) \]
\end{defini}

\begin{bsp}
$Code(seq) =1\cdot 2^0+1\cdot 2^1+0\cdot 2^2+1\cdot 2^3=11$\\
\begin{center}\begin{tabular}{cc|c}
$x_1$ & $x_2$ & $f(x_1,x_2)=seq(x_1,x_2)$\\
\hline
0 & 0 & 1\\
0 & 1 & 1\\
1 & 0 & 0\\
1 & 1 & 1
\end{tabular}
\end{center}
\end{bsp}
Alle Informationen über $F$ bzw. $f_F$ sind in Code($f$) gespeichert.

\subsection{HORN-Formeln}
\begin{defini}
Eine Formel $F$ ist eine \highl{HORN-Formel} $\Leftrightarrow$
\begin{enumerate}
   \item $F$ ist in KNF
   \item Jede Disjunktion entält \emph{höchstens} ein positives Literal
\end{enumerate}
\end{defini}

\begin{bsp}
Eine gültige HORN-Formel: $(A\vee \neg B\vee \neg C)\wedge (C\vee \neg
D)\wedge (\neg A\vee \neg B)$
\end{bsp}

\emph{Frage}: Gibt es für jede KNF eine semantisch äquivalente
HORN-Formel?\\
\emph{Anwort}: Nein!

HORN-Formeln sind aus zwei Gründen von Bedeutung:
\begin{enumerate}
   \item Sie lassen sich als PROLOG-Anweisung auffassen
   \item Sie besitzen einen effizienten Erfüllbarkeitstest
\end{enumerate}

\emph{zu 1}: prozedurale Deutung am (obigen) Beispiel:\\
$(A\vee \neg B\vee \neg C) \semaeq (\neg (B\wedge C)\vee A) \semaeq (B\wedge
C)\rightarrow A$\\
$(C\vee \neg D) \semaeq (\neg D\vee C) \semaeq (D\rightarrow C)$\\
$\neg A\vee \neg B \semaeq \neg (A\wedge B) \semaeq \neg (A\wedge B)\vee f \semaeq A\wedge B\rightarrow f$

\emph{zu 2}: Algorithmus
\begin{description}
   \item[1. Schritt:] Markiere alle Vorkommen von Atomen, die in Implikationen
   der Gestalt $(w \rightarrow A)$ auftreten
   \item[2. Schritt:] \underline{while} es gibt Teilformeln der Gestalt
   \begin{description}
      \item[i] $A_1\wedge \ldots \wedge A_n \rightarrow B$ oder
      \item[ii] $A_1\wedge \ldots \wedge A_n \rightarrow f$
   \end{description}
   , wobei alle Atome $A_1,\ldots,A_n$ bereits markiert sind\\
   \underline{do if} Fall i \underline{then} markiere alle Vorkommen von B\\
   \underline{else} \underline{return} Ausgabe "`unerfüllbar"'
   \item[3. Schritt:] \underline{return} Ausgabe "`erfüllbar"'
\end{description}

\begin{satz}
\begin{enumerate}
   \item Der Markierungsalgorithmus ist für HORN-Formeln als Eingabe korrekt.
   \item Falls die Ausgabe "`erfüllbar"' erreicht wird, dann ist die Belegung
   $\beta(A)=1$ für alle markierten Atome $A$ ein Modell für die Formel.
   \item Für die Formel $F$ mit n Atomen liefert der Algorithmus nach
   höchstens n Durchläufen eine Ausgabe. Das heißt der Algorithmus hat
   \underline{linearen Aufwand}.
\end{enumerate}
\begin{proof}
\begin{description}
   \item[zu 3:] In jedem Durchlauf wird ein Atom markiert. Nach höchstens n
   Durchläufen ist nichts mehr zu markieren und eine Ausgabe erscheint.
   \item[zu 2:] 
   \begin{lemma}Für alle Belegungen $\beta$ der Formel $F$ gilt:
   falls $\beta$ ein Modell von $F$ ist, dann gilt für alle Atome in $F$:
   falls $A$ markiert ist, dann ist $\beta(A)=1$.
   \begin{proof}
   \begin{description}
      \item[a] die Behauptung gilt für alle Atome $A$ die in Teilformeln der
      Gestalt $(w\rightarrow A)$ auftreten. Solche Atome werden im ersten
      Schritt markiert.\\
      Andererseits gilt: eine KNF ist wahr, gdw. jede Disjunktion der KNF ist
      wahr, insb. diejenigen, die die nur aus einem positiven Literal bestehen,
      also genau die mit $(w\rightarrow A)$.
      \item[b] Die Behauptung gilt auch für alle Atome B, die im 2. Schritt
      markiert werden: wir betrachten eine Teilformel der Gestalt
      $A_1\wedge\ldots\wedge A_n\rightarrow B$\\
      $B$ wird nur markiert, falls alle $A_i$ markiert sind. Dies bedeutet für
      jedes Modell $\beta\colon \beta(A_1)=\ldots =\beta(A_n)=1$.\\
      Damit gilt: $I_\beta(A_1\wedge \ldots \wedge A_n \rightarrow B)=1
      \Leftrightarrow \beta(B)=1$
   \end{description}
   \end{proof}
   \end{lemma}
   \item[zu 1:]
   \begin{description}
      \item[a] die Ausgabe "`unerfüllbar"' ist \underline{korrekt}
      \begin{proof}[indirekt]
      Angenommen, diese Aussage sei falsch. Dann hat die Formel $F$ ein Modell
      $\beta$. Die Ausgabe "`unerfüllbar"' erfolgt im 2. Schritt für
      $A_1\wedge\ldots\wedge A_n\rightarrow f$, wobei alle $A_1,\ldots,A_n$
      markiert sind.\\
      Wegen des Lemmas gilt $\beta(A_1)=\ldots = \beta(A_n)=1$. Dann gilt
      \begin{gather*}I_\beta(A_1\wedge\ldots\wedge A_n \rightarrow f)=0\end{gather*} 
      im Widerspruch zur Annahme, dass $\beta$ ein Modell ist.\\
      $\Rightarrow$ $F$ hat kein Modell.
      \begin{gather*}\end{gather*}\end{proof}
      \item[b] Die Ausgabe "`erfüllbar"' ist korrekt.\\
      Es sei $G$ eine beliebige Disjunktion ("`Klausel"') von $F$.
      \begin{description}
	 \item[1. Fall:] $G \semaeq A$ (d.\,h. $G=w\rightarrow A)$\\
	 $A$ wird im ersten Schritt markiert und $\beta(A)=1$ ist ein Modell von
	 $G$.
	 \item[2. Fall:] Es sei $G=A_1\wedge\ldots\wedge A_n \rightarrow B$ und
	 alle Atome $A_1,\ldots,A_n$ sind markiert\\
	 Dann wird im 2. Schritt $B$ markiert und $\beta(A_1)=\ldots
	 =\beta(A_n)=1=\beta(B)$ ist ein Modell von $G$.
	 \item[3. Fall:] Es sei $G=A_1\wedge\ldots\wedge A_n \rightarrow B$ aber
	 nicht alle Atome $A_1,\ldots,A_n$ sind markiert. \obda sei $A_1$ nicht
	 markiert.\\
	 Dann ist $\beta(A_1)=0$ ein Modell von $G$, denn
	 $I_\beta(A_1\wedge\ldots\wedge A_n \rightarrow B)=1$
	 \item[4. Fall:] Es sei $G=A_1\wedge\ldots\wedge A_n \rightarrow f$ und
	 die Atwort "`unerfüllbar"' sei nicht erfolgt. Dann sind nicht alle
	 Atome $A_1,\ldots,A_n$ markiert. Dann ist wie in Fall 3
	 $I_\beta(A_1\wedge\ldots\wedge A_n \rightarrow f)=1$.
      \end{description}
   \end{description}
\end{description}
\end{proof}
\end{satz}

\section{Die Folgerungsrelation und der Endlichkeitssatz}
wollen formal beschreiben: aus einer Formel $F$ folgt eine Formel $G$.\\
inhaltlich: immer wenn $F$ gilt, dann muss auch $G$ gelten.

\begin{defini}
$G$ heißt \highl{Folgerung} aus $F$ $\Leftrightarrow$ jedes Modell von $F$ auch
Modell von $G$.

\emph{Schreibweise:} $F \models G$\\
Das heißt für alle Belegungen $\beta$ gilt:
$\begin{array}{ccc}
I_\beta(F)=1 & \rightarrow & I_\beta(G)=1\\
I_\beta(F) & \leq & I_\beta(G)\\
f_F & \leq & f_G
\end{array}$
\end{defini}

\begin{bsp}
1. Möglichkeit: "`Argumentation über Wahrheitswerttabelle"'\\
$F := A\wedge (\neg A \vee B)$ und $G:= B$\\
$\begin{array}{ccccc}
I_\beta(A) & I_\beta(B) & I_\beta(\neg A\vee B) & I_\beta(F) & I_\beta(G)\\
0 & 0 & 1 & 0 & 0\\
0 & 1 & 1 & 0 & 1\\
1 & 0 & 0 & 0 & 0\\
1 & 1 & 1 & 1 & 1
\end{array}$
Man sieht: $f_F \leq f_G$.

2. Möglichkeit: "`Argumentation über Modell"'\\
Es sei $\beta$ ein Modell von $F$.\\
Dann gilt: $\beta$ ist ein Modell von $A$ und Modell von $(\neg A\vee B)$. Da
$I_\beta(A)=1$, ist $I_\beta(\neg A)=1-I_\beta(A)=0$.\\
Andererseits ist $I_\beta(\neg A\vee B)=1=\max\{I_\beta(\neg
A),I_\beta(B)\}=\max\{0,I_\beta(B)\}=1$\\
Also ist $I_\beta(B)=1$, $\beta$ also Modell von $G$.
\end{bsp}

\emph{Frage:} Welche Beziehungen bestehen zwischen der Implikation
"`$\rightarrow$"' und der Folgerungsrelation "`$\models$"'?\\
\emph{klar ist:} für Formeln $F$ und $G$ ist
\begin{description}
   \item[i] $F\rightarrow G$ wieder eine Formel, aber
   \item[ii] $F\models G$ ist \emph{keine} Formel, sondern eine Aussage über
   Formeln.
\end{description}

\begin{fakt}\mbox{}\\\vspace{-1cm}
\begin{eqnarray*}
F \models G & \Leftrightarrow & F \rightarrow G \in TAUT\\ 
% Beweis folgend
F \models G & \Leftrightarrow & \bigwedge_\beta(I_\beta(F) \leq I_\beta(G))\\
& \Leftrightarrow & \bigwedge_\beta(I_\beta(F \rightarrow G)=1)\\
& \Leftrightarrow & F \rightarrow G \in TAUT
\end{eqnarray*}
\end{fakt}

\begin{fakt}
\begin{eqnarray*}
F \semaeq G & \Leftrightarrow & (F \models G \textrm{ und } G \models F)\\
% Beweis
F \semaeq G & \Leftrightarrow & \bigwedge_\beta(I_\beta(F)=I_\beta(G))\\
& \Leftrightarrow & \bigwedge_\beta(I_\beta(F) \leq I_\beta(G) \textrm{ und }
I_\beta(G) \leq I_\beta(F))\\
& \Leftrightarrow & F \models G \textrm{ und } G \models F
\end{eqnarray*}
\end{fakt}

Wir werden einen Test auf Unerfüllbarkeit entwickeln.\\
Es gilt:
\begin{description}
   \item[a] $F \models G \Leftrightarrow  (F \rightarrow G) \in TAUT
   \Leftrightarrow \neg(F \rightarrow G)\in \overline{SAT} \Leftrightarrow
   (F\wedge \neg G) \in \overline{SAT}$
   \item[b] $F \semaeq G \Leftrightarrow (F\leftrightarrow G) \in TAUT
   \Leftrightarrow \neg (F\leftrightarrow G)\in \overline{SAT}$
   \item[c] $F \in TAUT \Leftrightarrow \neg F \in \overline{SAT}$
   \item[d] $F \in SAT \Leftrightarrow \neg F \notin \overline{SAT}$
\end{description}

$F \models G$ formalisiert "`aus $F$ lässt sich $G$ beweisen"'.

1. Beobachtung: Im allgemeinen werden aus mehreren Vorraussetzungen
Schlussfolgerungen gezogen.\\
2. Beobachtung: Jeder konkrete Beweis ist endlich.

\begin{defini}
Es sei $X$ eine Menge von Formeln und es sei $F$ eine Formel.
\begin{enumerate}
   \item $X$ besitzt ein Modell $\define$ es gibt eine Belegung $\beta$,
   die alle Formeln aus $X$ erfüllt.
   \item $X$ ist erfüllbar $\define$ $X$ besitzt ein Modell
   \item $F$ ist eine Folgerung von X $\define$ jedes Modell von $X$ ist auch
   Modell von $F$\\
   \emph{Schreibweise:} $X \models F$
   \item Es sei $Y$ eine Formelmenge.\\
   $Y$ folgt aus $X$ $\define$ jedes Modell von $X$ ist Modell für jede Formel
   in $Y$ ($X \models Y$)
\end{enumerate}
\end{defini}

\begin{bemerk}
\begin{description}
   \item[a] Es gilt nicht: $X$ ist erfüllbar $\Leftrightarrow$ alle Formeln
   aus $X$ sind erfüllbar.
   \begin{bsp} $X=\{A,\neg A\}$\\
   Dann gilt:
   \begin{description}
      \item[i] $A$ ist erfüllbar für $\beta(A)=1$\\
      $\neg A$ ist erfüllbar für $\beta(A)=0$, aber
      \item[ii] $X$ besitzt kein Modell! $X$ ist unerfüllbar.
   \end{description}
   \end{bsp}
   \item[b] $X \models Y$ $\Leftrightarrow$ für jede Belegung $\beta$ gilt:
   falls $\beta$ Modell für \underline{alle} Formeln aus $X$ ist, dann gilt
   für jede Formel $F\in Y$: $\beta$ ist Modell von $F$!
\end{description}
\end{bemerk}

\begin{bemerk}[Eigenschaften der Folgerungsrelation]
\begin{enumerate}
   \item $\models$ ist \emph{reflexiv}, d.\,h. $X \models X$ (es gilt: $X
   \supseteq Y$, dann ist $X \models Y$)
   \item $\models$ ist \emph{transitiv}, d.\,h. $X \models Y \wedge Y \models Z
   \rightarrow X \models Z$
   \item $Fl(X) := \{G\ |\ G \in \mathcal{L}_{Al} \textrm{ und } X \models G \}$
   heißt \highl{Folgerungshülle} von $X$.
\end{enumerate}
\end{bemerk}

Die Folgerungshülle besitzt folgende Eigenschaften:
\begin{enumerate}
   \item Einbettung: $X \subseteq Fl(X)$
   \item Monotonie: $X \subseteq Y \rightarrow Fl(X) \subseteq Fl(Y)$
   \item Abgeschlossenheit: $Fl(Fl(X)) = Fl(X)$
\end{enumerate}

Diese 3 Eigenschaften charakterisieren die Abbildung
\begin{gather*}
Fl\colon\ \mathcal{P}(\mathcal{L}_{Al}) \mapsto \mathcal{P}(\mathcal{L}_{Al})
\end{gather*}
als \highl{Hüllenoperator}.

\begin{bsp}
für eine \emph{unendliche} Formelmenge $X=\{A_1,A_1 \rightarrow A_2, A_2
\rightarrow A_3, \ldots \}$\\
Frage: Folgt $A_{17}$ aus $X$?\\
Antwort: ja.
\begin{proof}
\help{hier ist ein wenig zuviel platz?}
\begin{align*}
   \textrm{1. Schritt: } &\{ A_1, A_1 \rightarrow A_2 \} \models A_2\ (A_2 \in
   Fl(X))\\
   \textrm{2. Schritt: } &\{ A_2, A_2 \rightarrow A_3 \} \models A_3\ (A_3 \in
   Fl(X))\\
   \vdots & \\
   \textrm{16. Schritt: } &\{ A_{16}, A_{16} \rightarrow A_{17} \} \models
   A_{17}\ (A_{17}
   \in Fl(X))\\
\end{align*}
Also  $X \models A_{17}$
\end{proof}
\end{bsp}

\subsection{Endlichkeitssatz}
\begin{satz}\label{satz:endlich1}
Es seien $X$ eine (beliebige unendliche) Formelmenge und es sei $F$ eine
Formel.\\
\begin{gather*}
   X \models F \textrm{ gdw.  es gibt eine endliche Teilmenge } X_{FIN} \textrm{
   von } X \textrm{, s.d. } X_{FIN} \models F
\end{gather*}
\end{satz}

\begin{satz}\label{satz:endlich2}
Es sei $X$ eine (unendliche) Formelmenge und es sei $F$ eine Formel.

$X$ ist unerfüllbar gdw. es gibt eine Teilmenge $X_{Fin} \subseteq X$
($X_{Fin}$ endlich), die unerfüllbar ist.
\end{satz}

\begin{satz}\label{satz:endlich3}
Es sei $X$ eine (unendliche) Formelmenge.

Alle endlichen Teilmengen von $X$ sind erfüllbar, gdw. $X$ ist erfüllbar.
\end{satz}

Logische Struktur dieser Sätze:\\
\autoref{satz:endlich1}: $A_1 \leftrightarrow A_2$\\
\autoref{satz:endlich2}: $B_1 \leftrightarrow B_2$\\
\autoref{satz:endlich3}: $C_1 \leftrightarrow C_2$

Trivialerweise gilt: $A_2 \rightarrow A_1$, $B_2 \rightarrow B_1$ und $C_2
\rightarrow C_1$.

weitere Beziehungen: $B_2 = \neg C_1$ und $B_1 = \neg C_2$
\begin{gather*}
B_1 \rightarrow B_2 \semaeq \neg C_2 \rightarrow \neg C_1 \semaeq C_1
\rightarrow C_2
\end{gather*}
d.\,h. \autoref{satz:endlich2} ist äquivalent zu \autoref{satz:endlich3}

\underline{Behauptung}: Aus \autoref{satz:endlich1} folgt \autoref{satz:endlich2}!\\
Es sei $X$ unerfüllbar, d.\,h. $X$ hat kein Modell. Es sei $G$ irgendeine
Formel.

Dann gilt: Jedes Modell von $X$ ist auch Modell von $G$.\\
Das heißt $X \models G$ (aus einer unerfüllbaren Formelmenge folgt jede Formel)

Insbesondere gilt: $X \models f$, $f := A \wedge \neg A$\\
\autoref{satz:endlich1} impliziert: es gibt eine endliche Teilmenge $X_{Fin}
\subseteq X$ mit $X_{Fin} \models f$.

Da jedes Modell von $X_{Fin}$ auch Modell von $f$ ist, aber $f$ kein Modell hat,
besitzt auch $X_{Fin}$ kein Modell.

Wir haben gezeigt: $\{ A_1 \rightarrow A_2 \} \models \{ B_1 \rightarrow B_2 \}$

es gilt auch: aus \autoref{satz:endlich2} folgt \autoref{satz:endlich1}: $\{B_1
\rightarrow B_2\} \models \{A_1 \rightarrow A_2\}$.

Es gelte: $X \models F$\\
Wir betrachten $X \cup \{\neg F\}$. Behauptung: $X \cup \{\neg F\}$ ist
unerfüllbar.

\underline{indirekt}: Angenommen es gibt ein Modell $\beta$ von $X \cup \{\neg
F\}$. Dann gilt:
\begin{description}
   \item[a] $\beta$ ist Modell von $X$ und
   \item[b] $\beta$ ist Modell von $\neg F$
\end{description}

b bedeutet: $I_\beta(\neg F)=1$, d.\,h. $I_\beta(F)=0$.\\
Aus a folgt: (mit $X \models F$) $I_\beta(F)=1$ ($\beta$ ist Modell von $F$
\lightning)

\autoref{satz:endlich2} impliziert: es gibt eine endliche Teilmenge $X^{'}_{Fin}
\subseteq X \cup \{\neg F\}$, die unerfüllbar ist.

Wir betrachten $X_{Fin} := X^{'}_{Fin}\setminus\{\neg F\}$
\begin{description}
   \item[1. Fall:] auch $X_{Fin}$ ist unerfüllbar. Dann gilt: aus $X_{Fin}$
   folgt jede Formel, insb. $X_{Fin} \models F$
   \item[2. Fall:] $X_{Fin}$ ist erfüllbar. Dann gibt es ein Modell $\beta$
   von $X_{Fin}$. $\beta$ ist sicher kein Modell von $\neg F$. Das heißt
   $I_\beta(\neg F)=0$, d.\,h. aber $I_\beta(F)=1$. Also ist $\beta$ Modell von
   von $F$.
\end{description}
Also gilt: $X_{Fin} \models F$

Damit gilt $\textrm{\autoref{satz:endlich1}} \semaeq \textrm{ \autoref{satz:endlich2}}$.

\begin{proof}[\autoref{satz:endlich3}]
Problem: Aus der Fülle der Modelle der endlichen Teilmengen (die zueinander
nicht konsistent sein müssen) ein gemeinsames Modell für alle Formeln aus
$X$ zu konstruieren.

Es sei $X$  eine unendliche Formelmenge, in der die (unendlich viele) Atome
$A_1, A_2, A_3,\ldots$ vorkommen.

Für $n\geq 1$ definieren wir $X_n$ als die Menge aller Formeln aus $X$, die
höchstens $A_1,\ldots, A_n$ enthalten.

Zum Beispiel enthält $X_1$ alle Formeln aus $X$, in denen nur $A_1$ vorkommt. (Selbst
diese Menge $X_1$ kann noch unendlich sein)

Es gilt: $X_1 \subseteq X_2 \subseteq X_3 \subseteq \ldots \subseteq X$ und
$\bigcup^{\inf}_{n=1}X_n=X$

Es gilt: für jedes $F\in X$ gibt es einen Index $n_F$, s.d. $F\in
X_{n_F}$

Jede der Mengen $X_n$ kann unendlich sein, \emph{aber} jede dieser Mengen
enthält nur endlich viele paarweise nicht-äq. Formeln!

Wir wissen:
\begin{description}
   \item[i] $F \semaeq G$ gdw. $f_F=f_G$ und
   \item[ii] für jedes $n$ gilt: es gibt genau $2^{2^n}$
   Wahrheitswertfunktionen über den Atomen $A_1,\ldots, A_n$
\end{description}

Wir legen fest: $Y_n$ sei eine Teilmenge von $X_n$, die eine max. Menge
paarweise nicht-äq. Formeln enthält.

Dann gilt:
\begin{description}
   \item[*] jedes Modell von $Y_n$ ist endlich und
   \item[**] jedes Modell von $Y_n$ ist auch Modell von $X_n$
\end{description}

Nach Vorraussetzung gilt: für alle $n\geq 1$ ist $Y_n$ erfüllbar!

Für alle $n\geq 1$ sei $\beta_n$ ein Modell von $Y_n$.\\
Damit haben wir eine Familie $(\beta_n)^{n\geq 1}$ von Modellen für die gilt:
$\beta_n$ ist Modell von $X_n$ und damit von $X_{n-1},\ldots, X_2, X_1$.

Also gilt: 
\begin{description}
   \item[***] für alle $k \geq n$ ist $\beta_k$ Modell von $X_n$
\end{description}

\underline{Aufgabe}: Aus der Familie $(\beta_n)^{\inf}_{n=1}$ \emph{ein} Modell
$\beta$ von $X$ zu konstruieren.

\underline{Konstruktion in Stufen}: neben der Belegung $\beta$ auch eine
Indexmenge $I$
\begin{description}
   \item[Stufe 0] $\beta := \varnothing,\ I:=\{1,2,3,\ldots\}$ (Initialisierung)
   \item[Stufe n+1] \underline{if}(es gibt unendlich viele Indizes $i\in I$ mit
   $\beta_i(A_{n+1})=1$)\\\underline{then} $\beta(A_{n+1}):=1$ und $I:=
   I\mminus\{i| \beta_i(A_{n+1})=0\}$\\\underline{else} (es gibt nur
   \emph{endlich} viele Indizes $i\in I$ mit
   $\beta_i(A_{n+1})=1$)\\$\beta(A_{n+1}):=0$ und $I := I\mminus\{i|
   \beta_i(A_{n+1})=1\}$
\end{description}
\begin{fakt}
\begin{enumerate}
   \item Die Zuordnung $\beta$ ist definiert für die Menge aller Atome
   $\{A_1,A_2,\ldots\}$ mit Werten aus $\{0,1\}_i$ d.\,h. $\beta$ ist eine
   Belegung
   \item Die Indexmenge $I$ ist nach jeder Stufe unendlich. Dies ist
   offensichtlich nach Stufe 0. Falls die Aussage nach der Stufe $n$ gilt, dann
   gilt nach Stufe $n+1$:\\
   im if-Zweig bleiben unendlich viele $i$ mit $\beta_i(A_{n+1})=1$\\
   im else-Zweig bleiben unendlich viele $i$ mit $\beta_i(A_{n+1})=0$
   \item $\beta$ ist ein Modell von $X$!\\
   Es sei $F$ eine Formel aus $X$. Müssen zeigen: $\beta$ ist Modell von
   $F$.\\
   Es sei $n_F$ der kleinste Index, s.d. in $F$ höchstens die Atome
   $A_1,A_2,\ldots,A_{n_F}$ vorkommen.\\
   Nach der Stufe $n_F$ gibt es keinen Index $i_{n_F}\in I$ mit der Eigenschaft
   $\beta_{i_{n_F}}(A_{n_F})\neq \beta(A_{n_F})$ und es gibt keinen Index
   $i_{{n_F}-1} \in I$ mit $\beta_{i_{n_F-1}}(A_{n_F-1})\neq \beta(A_{n_F-1})$
   usw.\\
   $\vdots$\\
   es gibt keinen Index $i_2 \in I$ mit $\beta_{i_2}(A_2)\neq \beta(A_2)$\\
   es gibt keinen Index $i_1 \in I$ mit $\beta_{i_1}(A_1)\neq \beta(A_1)$

   Das heißt nach der Stufe $n_F$ gilt für \emph{alle} $i\in I$:
   $\beta_i(A_1)=\beta(A_1)$ und $\beta_i(A_2)=\beta(A_2)$ usw. bis
   $\beta_i(A_{n_F})=\beta(A_{n_F})$
\end{enumerate}
\end{fakt}
   wir wissen: (***) für alle $i \geq n_F$ gilt $\beta_i$ ist
   Modell von $X_{n_F}$ und $F\in X_{n_F}$

   Also gilt für diese $i$: $\beta_i$ ist Modell von $F$ und damit $\beta$ ist
   Modell von $F$.
\end{proof}

\begin{bemerk} Die Konstruktion sichert \underline{die Existenz} eines Modells
$\beta$, sie ist kein Algorithmus zur Berechnung von $\beta$!
\end{bemerk}

\section{Das Resolutionskalkül}
Ziel: Test auf Unerfüllbarkeit einer Formel $F$.

Eingabe: \help{hier muss ein Bild hin, dass eine Formel F als Eingabe in eine
Blackbox "`Resolutionskalkül zeigt, die die Ausgaben JA und NEIN hat.}

Im Allgemeinen hat jedes Kalkül die Form $K=(Ob.\ ;\ Reg)$. Dabei steht $Ob$
für eine Menge von Objekten (hier: $Ob$ ist die Menge aller Formeln) und $Reg$
steht für eine Menge von Regeln (hier: $Reg$ besteht aus einer syntaktischen
Regel: Formelmanipulation)

Jedes Kalkül ist in Bezug auf eine konkrete Aufgabe definiert (hier: Test auf
Unerfüllbarkeit).

Jedes Kalkül, dass funktioniert, muss in Bezug auf seine Aufgabe zwei
Eigenschaften erfüllen:
\begin{enumerate}
   \item Korrektheit: keine erfüllbare Formel wird als unerfüllbar berechnet
   \item Vollständigkeit: Alle unerfüllbaren Formeln werden als
   unerfüllbare Formeln erkannt.
\end{enumerate}

Eingabe für den Test: beliebige Formel $F$.\\
Frage: in welcher Form ist $F$ gegeben?

Wissen: zu jeder Formel $F$ gibt es eine KNF (die äquivalent ist)
\[\bigwedge_{i=1}^{m}(\bigvee_{j=1}^{n_i} L_{ij})\]
Dies schreiben wir in der Form:
\[\{\{L_{11},L_{12},\ldots,L_{1n_1}\},\{L_{21},\ldots,L_{2n_2}\},\ldots,\{L_{m1},\ldots,L_{mn_m}\}\}\]
Dies ist eine Menge von Mengen von Literalen. Letzteres heißt
"`\highl{Klausel}"'. Also schreiben wir die KNF als \highl{Klauselmenge}.

\begin{bsp}
Wir betrachten die folgenden Formeln in KNF:
\begin{eqnarray*}
(A_1\vee \neg A_2)\wedge (A_1\vee A_3\vee \neg A_4)\\
(A_1\vee A_1\vee \neg A_2)\wedge (A_1\vee A_3\vee \neg A_4)\wedge (A_1\vee
A_3\vee A_1\vee \neg A_4)\\
(A_1\vee \neg A_2\vee \neg A_2)\wedge (A_1\vee A_3\vee \neg A_4\vee A_1)\wedge
(A_1\vee \neg A_2)
\end{eqnarray*}
Diese drei Formeln liefern folgende Klauselmenge:
\[\{\{A_1, \neg A_2\},\{A_1, A_3, \neg A_4\}\}\]
Diese Zuordnung ist nicht umkehrbar eindeutig!\\
Aber es gilt: falls zwei Formeln $F_1$ und $F_2$ die selbe Klauselmenge liefern,
dann sind sie semantisch äquivalent. ($F_1\semaeq F_2$)

Insbesondere gilt: $F_1\in \overline{SAT}\leftrightarrow F_2\in
\overline{SAT}$.\\
Das heißt in Bezug auf den Test "`Unerfüllbarkeit"' gehen durch die Reduktion keine
Informationen verloren.
\end{bsp}

\begin{defini}
Es sei $F$ eine Formel gegeben als Klauselmenge. Eine Klausel $R$ heißt
\highl{Resolvent} von $F \define$ es gibt zwei Klauseln $K_1$ und $K_2$ in $F$
und es gibt ein Literal $L$ mit der Eigenschaft $L\in K_1$ und $\overline{L}\in
K_2$ und es gilt $R=(K_1\mminus\{L\})\cup (K_2\mminus\{\overline{L}\})$.

Schreibweise: \help{das Bild hier zeigt K1 und K2 über und verbunden mit R}\\
Dies symbolisiert die einzige Regel des Kalküls.
\end{defini}

\begin{bsp}
$K_1=\{A_1, \neg A_2, A_3, A_4\},\ K_2=\{\neg A_1, A_2, A_3, A_5, A_6\}$\\
$K_1$ und $K_2$ liefern $R'=\{\neg A_2, A_3, A_4, A_2, A_5, A_6\}$ und $R''=\{
A_1, A_3, A_4, \neg A_1, A_5, A_6\}$
\end{bsp}

Für die Anwendung der Resolutionsregel gibt es eine besondere Situation:\\
zwei Klauseln der Gestalt: $K_1=\{L\}$ und $K_2=\{\overline{L}\}$ liefern
$R=\{L\mminus\{L\}\}\cup \{\overline{L}\mminus\{\overline{L}\}\}=\varnothing$

Die leere Resolution ist das Ergebnis eines solchen Resolutionsschrittes und nur
in dieser Situation tritt die leere Menge auf.

Eine Belegung $\beta$ ist Modell von $F$ gdw. $\beta$ Modell von allen Klauseln
von $F$ ist.

Falls in $F$ zwei Klauseln $K_1=\{L\}$ und $K_2=\{L\}$ vorkommen, dann ist kein
$\beta$ Modell von $K_1$ \underline{und} $K_2$ und damit kein $\beta$ Modell von
$F$. ($F$ unerfüllbar)

Dies bedeutet: der leere Resolvent ist ein Indiz für die Unerfüllbarkeit.

\begin{satz}
Es sei $F$ gegeben als Klauselmenge und es sei $R$ ein Resolvent von $F$. Dann
gilt: 
\[F\semaeq F\cup \{R\}\]
\begin{proof}
es genügt z.z.:
\begin{enumerate}
   \item $F\models F\cup \{R\}$
   \item $F\cup \{R\}\models F$ (klar: $Y\models X$ für jede $X\subseteq Y$)
\end{enumerate}
zu 1: (klar ist: $F\models F$)\\
es genügt z.z.:
\[ F\models R \]
Es seien $K_1, K_2\in F$ mit $L\in K_1$ und $\overline{L}\in K_2$ und
$R=(K_1\mminus\{L\})\cup (K_2\mminus\{\overline{L}\})$

Es sei $\beta$ ein Modell von $F$ und damit von $K_1$ und $K_2$.
\begin{description}
   \item[1. Fall] $\beta$ ist Modell von $L$. Dann ist $\beta$ kein Modell von
   $\overline{L}$, aber von $K_2$ und damit auch von
   $K_2\mminus\{\overline{L}\}$ und damit von $R$.
   \item[2. Fall] $\beta$ ist kein Modell von $L$, aber von $K_1$ und damit von
   $(K_1\mminus\{L\})$ und von $R$.
\end{description}
\end{proof}
\end{satz}

\begin{defini}
Es sei $F$ eine Klauselmenge.
\begin{description}
   \item[a] Dann ist $Res(F):= F\cup \{R| R \textrm{ ist Resolvent zweier Klauseln
   von }F\}$
   \item[b] Wir definieren induktiv für alle $k\in \mathbb{N}$: 
   \begin{eqnarray*}Res^{0}(F):=F\\ Res^{k+1}(F):=Res(Res^{k}(F)\end{eqnarray*}
   \item[c] Wir definieren die \highl{Resolutionshülle} \[Res^{*}(F):=
   \bigcup_{k\in \mathbb{N}}Res^{k}(F)\]
\end{description}
\end{defini}

\underline{Kommentare:}
\begin{enumerate}
   \item $Res^{k}(F)$ ist für alle $K$ definiert und es gilt
   \begin{enumerate}
      \item $Res^{0}=F$ und
      \item $Res^1(F)=Res(F)$ und
      \item $Res^0(F)\subseteq Res^1(F)\subseteq \ldots \subseteq Res^*(F)$
   \end{enumerate}
   \item Das Resolutionslemma liefert: $F\semaeq Res(F)$ und damit $F\semaeq
   Res^0(F)\semaeq Res^1(F)\semaeq \ldots \semaeq Res^*(F)$\\
   Das heißt insbesondere $F$ ist unerfüllbar gdw. die Resolutionshülle
   $Res^*(F)$ ist unerfüllbar.
   \item Die Resolutionshülle $Res^*(F)$ besitzt die char. Eigenschaften eines
   Hüllenoperators:
   \begin{enumerate}
      \item $F\subseteq Res^*(F)$ Einbettung
      \item $F\subseteq G \rightarrow Res^*(F)\subseteq Res^*(G)$ Monotonie
      \item $Res^*(Res^*(F))=Res^*(F)$ Abgeschlossenheit
   \end{enumerate}
   \item \begin{lemma} Falls $F$ eine endliche Klauselmenge ist, dann gibt es
   ein $k\in \mathbb{N}$, s.d. $Res^{k+1}(F)=Res^{k}(F)$
   \begin{proof} Es seien $A_1,\ldots, A_n$ die Atome von $F$.\\
   \underline{Frage:} Wieviele Klauseln mit diesen Atomen gibt es höchstens?\\
   Für eine Klausel $K$ gibt es in Bezug auf ein fixes Atom $A_i$ vier
   Möglichkeiten:
   \begin{enumerate}
      \item (nur) $A_i$ kommt in $K$ vor
      \item (nur) $\neg A_i$ kommt in $K$ vor
      \item $A_i$ und $\neg A_i$ kommen in $K$ vor
      \item weder $A_i$ noch $\neg A_i$ kommen in $K$ vor
   \end{enumerate}
   Das heißt es gibt höchstens $4^n$ verschiedene Klauseln mit den Atomen
   $A_1,\ldots,A_n$.

   Der Effekt des Resultierens ist es neue Klauseln zu produzieren. Nach
   höchstens $k\leq 4^n$ Stufen ist nichts neues mehr zu resultieren.

   Das heißt $Res^k(F)=Res^{k+1}(F)$ [Dabei ist $k=4^n$ eine grobe obere Schranke]
   \end{proof}
   \end{lemma}
   \item Folgerung: Für jede endliche Klauselmenge $F$ gilt: es gibt eine
   stufe $k$ mit $Res^*(F)=Res^k(F)$
   \begin{proof}Es sei $Res^k(F)=Res^{k+1}(F)$.\\ Dann gilt:\begin{eqnarray*}
   Res^{k+2}(F)&=&Res(Res^{k+1}(F))=Res(Res^k(F))\\&=&Res^{k+1}(F)=Res^k(F)\end{eqnarray*}

   Also gilt: \[Res^0(F)\subseteq \ldots \subseteq
   Res^k(F)=Res^{k+1}(F)=Res^{k+l}\] und damit
   \[ Res^*(F)=\bigcup_{l=0}^{\infty}Res^l(F)=\bigcup_{l=0}^{k}Res^l(F)=Res^k(F) \]
   \end{proof}
\end{enumerate}

\begin{satz}[Resolutionssatz der Aussagenlogik]
Es sei $F$ eine beliebige Klauselmenge.
\[F \textrm{ ist unerfüllbar gdw. }\varnothing \in Res^*(F)\]
\begin{proof}
wir zeigen I: $\varnothing \in Res^*(F)\rightarrow F$ ist unerfüllbar.

Es sei also $\varnothing\in Res^*(F)$.\\
Es sei $k_0$ die kleinste Stufe mit der Eigenschaft $\varnothing \in Res^*(F)$.

Das heißt $\varnothing \notin Res^{k_0-1}(F)$ und beim Übergang von $k_0-1$ zu $k_0$
entstanden.

Also gibt es in $Res^{k_0-1}(F)$ zwei Klauseln $K_1$ und $K_2$ der Form
$K_1=\{L\}$ und $K_2=\{\overline{L}\}$ und \help{wieder das Bild der Resolution,
das sollte man auch mit Latex bauen können?!} $K_1$ und $K_2$ sind als
Konjunktion unerfüllbar. Dies gilt auch für $Res^{k_0-1}(F)$ und damit auch
für $Res^0(F)=F$.

Wir zeigen II: $F$ ist unerfüllbar $\rightarrow \varnothing \in Res^*(F)$

Es sei $F$ eine unerfüllbare Klauselmenge.\\
\obda sei $F$ endlich. (nach Endlichkeitssatz: in jeder unerfüllbaren
unendlichen Menge gibt es eine unerfüllbare endliche Menge)

Wir beweisen II durch Induktion über die Anzahl der Atome von $F$.

\emph{Induktionsanfang}: $n=1$: in $F$ kommt (nur) das Atom $A_1$ vor
\underline{und} $F$ ist unerfüllbar.\\
Mit $A_1$ gibt es folgende Klauseln:
\[ \{A_1\},\ \{\neg A_1\},\ \{A_1, \neg A_1\}\]
$\{A_1, \neg A_1\}$ kann man nach der Tautologieregel streichen. Also bleiben
(höchstens) $\{A_1\}$ und $\{\neg A_1\}$.

Da $F$ unerfüllbar, muss es beide geben. Dann gilt: \help{ $A_1$ und $\neg
A_1$ resolvieren zu $\varnothing$}, also $\varnothing \in Res^*(F)$.

\emph{Induktionsschritt}:\\
Induktionsvorraussetzung: Für jede Formel $G$ mit (höchstens) $n$ Atomen
$A_1,\ldots, A_n$ gilt:\\
Wenn $G$ unerfüllbar ist, dann ist $\varnothing \in Res^*(G)$.\\
Induktionsbehauptung: Für jede Formel $F$ mit (höchstens) $n+1$ Atomen
$A_1,\ldots, A_n, A_{n+1}$ gilt:\\
Wenn $F$ unerfüllbar ist, dann gilt $\varnothing \in Res^*(F)$.

\emph{Induktionsbeweis}: Es sei $F$ unerfüllbar und in $F$ kommen
(höchstens) $n+1$ Atome vor. Wir konstruieren zwei neue Klauselmengen:
\begin{enumerate}
   \item $F_1$: wir streichen jedes Vorkommen von $\neg A_{n+1}$ in jeder
   Klausel von $F$ und wir streichen jede Klausel, in der $A_{n+1}$ vorkommt.\\
   Illustration:
   \begin{align*}&(\ldots\vee \neg A_{n+1}\vee \ldots \vee A_3\vee\ldots )\wedge(\ldots\vee
   A_{n+1}\vee \ldots \vee A_2\vee \ldots )\wedge \ldots\\
   &(\ldots\vee 0\vee \ldots \vee \ldots )\wedge \underbrace{(\ldots \vee 1\vee
   \ldots)}_{1}\wedge \ldots
   \end{align*}
   \item $F_0$, dual:\begin{enumerate}\item streichen Vorkommen von
   $A_{n+1}$\item streichen jede Klausel in der $\neg A_{n+1}$
   vorkommt\end{enumerate}
\end{enumerate}
$F_1$ hat engegengesetzte Streichungen zu $F_0$.\\
$F_0$ und $F_1$ sind zwei Klauselmengen mit (höchstens) den Atomen
$A_1,\ldots,A_n$.

Behauptung: $F_0$ und $F_1$ sind unerfüllbar!

Wir zeigen durch indirekten Beweis. Annahme: $F_0$ hat ein Modell $\beta_0$.\\
Dann definieren wir eine Belegung $\beta_{0}^{'}$ für $F$ durch
\begin{align*}\beta_0(A_i)=_{df} \left\{ \begin{array}{ll}\beta_0(A_i) & \textrm{ für
} i=1,\ldots,n\\ 0 & \textrm{ für } i=n+1\end{array}\right.
\end{align*}

Alle Klauseln, in denen $A_{n+1}$ vorkommt, werden wahr, da sie in $F_0$ wahr
sind und $w\vee 0\semaeq w$ gilt.

Alle Klauseln, in denen $\neg A_{n+1}$ vorkommt, werden sofort wahr.

Alle übrigen Klauseln (sehen genauso aus wie in $F_0$) werden wahr.

Also ist $\beta_0^{'}$ ein Modell von $F$.\\
Nach Vorraussetzung ist aber $F$ unerfüllbar \lightning

Also gilt: $F_0$ ist unerfüllbar. Analog für $F_1$.

Die Induktionsvorraussetzung liefert:
\begin{enumerate}
   \item \label{a} $\varnothing \in Res^*(F_0)$ und
   \item \label{b} $\varnothing \in Res^*(F_1)$
\end{enumerate}

\autoref{a} bedeutet: es gibt eine Folge von Klauseln $K_1,K_2,\ldots, K_l$, so dass
gilt: für alle $K_i\ (1\leq i\leq l)$ ist entweder $K_i$ ein Element aus $F_0$
(Startklauseln) oder es gibt zwei Klauseln $K_\alpha$ und $K_\beta$ mit
$\alpha,\beta < i$ und \help{Resolution $K_\alpha, K_\beta$ zu $K_i$} und
$K_l=\varnothing$

\autoref{b} bedeutet: es gibt eine Folge von Klauseln
$K_1^{'},K_2^{'},\ldots,K_m^{'}$, so dass gilt: für alle $K_j^{'}\ (1\leq
j\leq m)$ ist entweder $K_j^{'}\in F$ (Startklauseln) oder es gibt zwei Klauseln
$K_\gamma^{'}$ und $K_\delta^{'}$ mit $\gamma, \delta < j$ und \help{Resolution
$K_\gamma, K_\delta$ zu $K_j$} und $K_m=\varnothing$

\begin{description}
   \item[1. Fall] Alle Startklauseln aus $K_1,\ldots, K_l$ sind Klauseln aus
   $F$.\\ Dann sind alle Klauseln aus $K_1,\ldots, K_l$ Elemente aus $Res^*(F)$
   und damit $\varnothing\in Res^*(F)$
   \item[2. Fall] Alle Startklauseln aus $K_1^{'},\ldots,K_m^{'}$ sind Klauseln
   aus $F$.\\ Dann sind alle Klauseln aus $K_1^{'},\ldots,K_m^{'}\in Res^*(F)$
   und damit $\varnothing\in Res^*(F)$
   \item[3. Fall] "`Sonst-Fall"' (d.\,h. Fall 1/2 gelten nicht)\\ Die
   Startklauseln aus $F_0$ sind entstanden durch Streichen aller Vorkommen von
   $A_{n+1}$.\\ Wir betrachten die Folge
   $\tilde{K}_1,\tilde{K}_2,\ldots,\tilde{K}_l$, die entsteht,
   wenn zunächst in allen Startklauseln von $F_0$ dort, wo $A_{n+1}$
   gestrichen wurde, $A_{n+1}$ wieder hinzugefügt wird und dann resolviert
   wird. (z.\,B. $\tilde{K}_1=K_1\cup \{A_{n+1}\}$ falls $A_{n+1}$ dort
   gestrichen wurde)\\
   Der Effekt dieses Hinzufügens ist:\[\tilde{K}_i=K_i \textrm{ oder }
   \tilde{K}_i=K_i \cup \{A_{n+1}\}\]
   Insbesondere gilt: $\tilde{K}_l=K_l\cup \{A_{n+1}\}=\{A_{n+1}\}$
\end{description}

\underline{Analog}: Die Startklauseln aus $F_1$ sind entstanden durch Streichen
der Vorkommen von $\neg A_{n+1}$. Wir betrachten die Folge
$\tilde{K}_1^{'},\ldots, \tilde{K}_m^{'}$, die entsteht, wenn
zunächst in den Startklauseln, in denen $\neg A_{n+1}$ gestrichen wurde, $\neg
A_{n+1}$ wieder hinzugefügt wird un danach resolviert wird.\\
Dies liefert $\tilde{K}_m^{'}=\{\neg A_{n+1}\}$.\\
Ein weiterer Resolutionsschritt \help{Resolution $\tilde{K_l},
\tilde{K}_m^{'}$ zu $\varnothing$} liefert $\varnothing \in Res^*(F)$
\end{proof}
\end{satz}

\begin{defini} Es sei $F$ eine endliche (unerfüllbare) Klauselmenge.

Eine \highl{Ableitung} oder \highl{Deduktion} der leeren Klausel $\varnothing$
ist eine Folge $K_1,\ldots, K_l$ von Klauseln, für die gilt: entweder ist
$K_i\in F$ (Startklausel) oder es gibt $\alpha, \beta < i$ und \help{Resolution
$K_\alpha, K_\beta$ zu $K_i$}
\end{defini}

\begin{bsp}
\help{Resolutionsbaum $F=\big\{\{A,B,C,D\},\{A,B,C,\neg D\},\{A,B,\neg
C\},\{A,\neg B\},\{\neg A\}\big\}$ jeweils resolviert: $\{A,B,C\},\ \{A,B\},\
\{A\},\ \{\varnothing\}$}\\
Ableitungen: $K_1=\{A,B,C,D\},\ K_2=\{A,B,C,\neg D\},\ K_3=\{A,B,\neg C\},\
K_4=\{A,\neg B\},\ K_5=\{\neg A\},\ K_6=\{A,B,C\},\ K_7=\{A,B\},\ K_8=\{A\},\
K_9=\{\varnothing\}$
\end{bsp}

Beispiele dieser Art benötigen etwa soviele Schritte wie Atome (linearer
Aufwand)\\
\underline{ABER}: Es gibt Beispiele, die erfordern expotentiellen Aufwand.

Der Induktionsbeweis liefert folgenden Algorithmus:

\highl{Algorithmus von Gilmore}

\begin{Verbatim}[commandchars=\\\{\}]
n:=0
Res[n]:=F
\schlwort{repeat} n:=n+1
   Res[n]:= Res(Res[n-1])
\schlwort{until} (\ensuremath{\varnothing\in} Res[n]) \schlwort{or} (Res[n] = Res[n-1])

\schlwort{if} (\ensuremath{\varnothing\in} Res[n])
\schlwort{then} \schlwort{return} unerfüllbar
\schlwort{else} \schlwort{return} erfüllbar
\end{Verbatim}

\chapter{Einführung in die Kombinatorik}
\emph{Frage:} Wie viele Elemente enthält eine gegebene Menge?\\
Die "`\emph{Kunst des Zählens}"'

\section{Elementare Abzählregeln}
\subsection{Summenregel}
Gegeben seien $a_1$ Elemente vom Typ $A_1$ und $a_2$ Elemente vom Typ $A_2$.\\
Dabei schließen sich diese Typen gegenseitig aus.

\emph{Frage}: Auf wie viele Weisen lässt sich ein Element vom Typ $A_1$ oder
$A_2$ wählen?

\emph{Antwort}: $a_1+a_2$

\emph{Begründung}: Bilden 
\begin{gather*}
   M_1\define \{x\ |\ x \textrm{ vom Typ } A_1\}\\
   M_2\define \{y\ |\ y \textrm{ vom Typ } A_2\}
\end{gather*}   
Dann gilt: $M_1\cap M_2 = \varnothing$ und es gilt: $\textrm{card}(M_1\cup
M_2)=\textrm{card}M_1+\textrm{card} M_2$.

\underline{Sprechweise}: Falls gilt $\textrm{card}M=n$ für $n\in \mathbb{N}$ dann
heißt $M$ $n$-Menge.

\underline{Verallgemeinerung}: Die Summenregel gilt für jede endliche Anzahl
$k\geq 2$ von Typen.

\subsection{Produktregel}
Gegeben seien $a_1$ Elemente vom Typ $A_1$ und $a_2$ Elemente vom Typ $A_2$.

\emph{Frage}: Auf wie viele Weisen lässt sich ein Paar mit der ersten Komponente
von $A_1$ und mit der zweiten Komponente vom Typ $A_2$ bilden?

\emph{Antwort}: $a_1\cdot a_2$

\emph{Begründung}: Wir betrachten \[ M_1\times M_2 \define \{(x,y)\ |\ x\in
M_1 \textrm{ und } y\in M_2\}\]
und es gilt: $\card M_1\times M_2 = \card M_1 \cdot \card M_2=a_1\cdot a_2$

\underline{Verallgemeinerung}: Die Produktregel gilt für jede endliche Anzahl
$k\geq 2$ von Typen.

\begin{bsp} Wie viele Schriften erlaubt ein gegebener PC?

"`Schrift "' hat folgende Komponenten:
\begin{enumerate}
   \item "`Schriftart"': Arial,\dots Dies seien 20.
   \item "`Schriftgröße: \dots,12 Pkt,\dots Dies seien 27.
   \item "'Schriftsatz"`: fett, kursiv, unterstrichen\\
   Dies sind 3 Komponenten, die unabhänig voneinander gewählt werden 
   können.\\ Für jede Komp. gibt es zwei Möglichkeiten: (an/aus) 
   $2\cdot 2\cdot 2\cdot =8$
\end{enumerate}
Also insgesamt: $20\cdot 27\cdot 8$ Möglichkeiten.
\end{bsp}

Ein zweiter Blick auf die Produktregel als "`Entscheidungsbaum"'.\\
Wir haben einen $k$-stufigen Entscheidungsprozess:

1. Stufe: $a_1$ verschiedene Alternativen\\
\vdots\\
k. Stufe: $a_k$ verschiedene Alternativen

\subsection{Gleichheitsregel}
Gegeben seien zwei verschiedene Mengen $X$ und $Y$. Falls es eine Bijektion
zwischen diesen beiden Mengen gibt, dann gilt: $\card X=\card Y$.
\begin{bsp}
Gegeben sei die Menge $M=\{x_1,\dots,x_m\}$ (also ist $M$ eine $m$-Menge) und
wir definieren \[X\edefine \big\{f\ |\ f\colon\,M\mapsto \{0,1\}\big\}=\{0,1\}^M\]

Es gilt: \[\card M=\card \{0,1\}^M=(\card\{0,1\})^{\card M}=2^m\]
Wir betrachten nun $Y\edefine \{N\ |\ N\subseteq M\}=\mathcal{P}(M)$.

\emph{Behauptung}: Es gibt eine Bijektion $\varphi$ von $X$ und $Y$.

\emph{Folgerung}: $\card (\mathcal{P})=\card (\{0,1\}^M)=2^{\card M}=2^m$

Wir definieren: $\varphi(N)\edefine \psi_N\ \ (N\subseteq M)$\\
Dabei ist $\psi_N(x) \edefine \Big\{ \begin{array}{ll}1 & \textrm{ falls } x\in N\\
0 & \textrm{ falls } x\notin N\end{array}$ die \highl{charakteristische
Funktion} von $N$.

Es gilt: Definitionsbereich $D_\varphi = \mathcal{P}(M)$, $\psi_N\in \{0,1\}^M$

Bleibt zu zeigen: $\varphi$ inj. und surj.
\begin{enumerate}
   \item $\varphi$ injektiv: $\varphi(N_1)=\varphi(N_2) \Rightarrow N_1=N_2$
   
   Es sei also $\varphi(N_1)=\varphi(N_2)$. Dann gilt: 
   \[x\in N_1 \leftrightarrow \psi_{N_1}(x)=1\leftrightarrow \psi_{N_2}(x)=1
   \leftrightarrow x\in N_2\]
   \item $\varphi$ surjektiv: für jedes $f\in \{0,1\}^M$ gibt es ein $N\in
   \mathcal{P}(M)$ mit $\varphi(N)=f$.

   Es sei also $f\in \{0,1\}^M$.\\
   Wir definieren $N:=\{x\ |\ x\in M \textrm{ und } f(x)=1\} =: f^{-1}(1)$

   Damit gilt: $f(x)=1 \leftrightarrow x\in f^{-1}(1)\leftrightarrow x\in
   N\leftrightarrow \psi_N(x)=1$

   Also gilt: $\varphi(N)=\psi_N=f$
\end{enumerate}
\end{bsp}

\subsection{Regel vom zweifachen Abzählen}
Gegeben seien eine $n$-Menge $A=\{a_1,\dots,a_n\}$ und eine $m$-Menge
$B=\{b_1,\dots,b_m\}$ und eine binäre Relation $R\subseteq A\times B$ zwischen
$A$ und $B$.

Ferner sei $r(a_i)$ die Anzahl der Elemente aus $B$, die mit $a_i$ in Relation
stehen; und es sei $r(b_j)$ die Anzahl der Elemente aus $A$, die mit $b_j$ in
Relation stehen.

\begin{align*}
r(a_j) &= \card\{(a_i,b)\ |\ (a_i,b)\in R\}\\
& = \card\{b\ |\ b\in B \wedge (a_i,b)\in R\}\\
r(b_j) &= \card\{a\ |\ a\in A \wedge (a,b_j)\in R\}
\end{align*}

Begründung: Darstellung als Rechteckschema:

\begin{tabular}{c c c c c c c}
 & $b_1$ & $b_2$ & \dots & $b_j$ & \dots & $b_m$\\
$a_1$ & 1 & 0 & \dots & 1 & \dots & 0\\
\vdots & & & \vdots & & \vdots\\
$a_i$ & 0 & 0 & \dots & 1 & \dots & 0\\
\vdots & & & \vdots & & \vdots\\
$a_n$ & 1 & 1 & \dots & 0 & \dots & 0
\end{tabular}

$r(a_1)$: Anzahl Einsen in der ersten Zeile,\\
$r(a_i)$: Anzahl Einsen in Zeile~$i$,\\
$r(b_j)$ analog.

Einträge: 
\begin{gather*}
   m_{ij}=1 \leftrightarrow (a_i,b_j)\in R\\
   m_{ij}=0 \leftrightarrow (a_i,b_j)\notin R
\end{gather*}

Dann gilt: $\sum_{i=1}^n r(a_i) = \sum_{j=1}^m r(b_j)$

\begin{bsp}
$A=B=\{1,2,\dots,10\}$ und $R$ als $R$ als Teilerrelation.
\[ (i,j)\in R \leftrightarrow i\setminus j\]
Frage: Wie sieht dann das Rechteckschema aus?\\
Frage: Wie viele Teiler hat eine nat. Zahl im Mittel?

\begin{tabular}{c c c c c c c c c c c}
  & 1 & 2   & 3	  & 4	& 5   & 6   & 7	  & 8	& 9   & 10\\
1 & 1 & 1   & 1	  & 1	& 1   & 1   & 1	  & 1	& 1   & 1\\
2 &   &	1   &	  & 1	&     & 1   &	  & 1	&     & 1\\
3 &   &	    & 1	  &	&     & 1   &	  &	& 1   &  \\
4 &   &	    &	  & 1	&     &	    &	  & 1	&     &	 \\
5 &   &	    &	  &	& 1   &	    &	  &	&     & 1\\
6 &   &	    &	  &	&     & 1   &	  &	&     &  \\
7 &   &	    &	  &	&     &	    & 1	  &	&     &  \\
8 &   &	    &	  &	&     &	    &	  & 1	&     &  \\
9 &   &	    &	  &	&     &	    &	  &	& 1   &  \\
10 & & & & & & & & & & 10
\end{tabular}

$\begin{array}{c c c c c c c c c c c}
t(j) & 1 & 2 & 2 & 3 & 2 & 4 & 2 & 4 & 3 & 4\\
\overline{t(j)} & 1 & 3/2 & 5/3 & 8/4 & 10/5 & 14/6 & 16/7 & 20/8 & 23/9 & 27/10
\end{array}$

$t(j)$ - Anzahl der Teiler von $j$\\
$\overline{t(j)}$ - Anzahl der Teiler von $j$ im Mittel
\[ \overline{t(n)} = 1/n \sum_{j=1}^n t(j)\]
\end{bsp}

$t(j)$ ist völlig unregelmäßig.\\
$t(prim)=2$,\\
$t(2^k)=k+1$

Blick auf die Zeilen:\\
in Zeile $i$ stehen an den Stellen $1\cdot i,2\cdot i,3\cdot i,\dots$ solange
bis $k\cdot i \leq n$: das größte $k$ ist $k=\frac{n}{\floor{i}}$\\
d.\,h. $r(i)=\frac{n}{\lfloor i\rfloor}$ und es gilt:
\[ \overline{t(n)}= 1/n \cdot \sum_{j=1}^n t(j)= 1/n\cdot \sum_{i=1}^n r(i)=
1/n\cdot \sum_{i=1}^n \frac{n}{\floor{i}}\]
für das größte ganze $\floor{x}$ gilt:
\[ x-1 < \floor{x} \leq x \]
also gilt $\floor{x} \sim x$ und der Fehler ist kleiner als 1.

Also:
\[ 1/n \cdot \sum_{i=1}^n n/\floor{i} = 1/n\cdot \sum_{i=1}^n n/i = 1\cdot
\sum_{i=1}^n 1/i :=\ H_n\]
$H_n$ wird als $n$-te harmonische Zahl bezeichnet und es gilt $H_n \sim \ln{n}$

\subsection{Kominatorische Grundaufgaben}

\begin{tabular}{|l|l|l|}
\hline
\textsc{Wiederholung} & \textsc{Reihenfolge wird berücksichtigt} & 
\textsc{Reihenfolge wird n. b.}\\
\hline
\hline
Elemente einfach & Permutation ohne Wiederholung & Kombination o.W.\\
\hline
Elemente mehrfach & Permutation mit Wiederholung & Kombination m.W.\\
\hline
\end{tabular}

"`Denkmodelle"' erweisen sich als hilfreich in der Kombinatorik.

Wir untersuchen:
\begin{description}
   \item[Urnenmodell] aus einem Gefäß werden Kugeln gezogen
   \item[Schubfachmodell] auf vorhandene Schubfächer werden Gegenstände
   verteilt
\end{description}

\subsection{Ermittlung der Zahlenwerte}
\subsubsection{Permutation ohne Wiederholung (o.W.)}
Gegeben sei eine $n$-Menge $N$.

Eine $r$-Permutation o.W. der $n$-Menge $N$ ist $\define$ ein $r$-Tupel
($\rightarrow$ Reihenfolge) verschiedener Elemente ($\rightarrow$ o.W.) aus $N$.

$P(n,r)$ bezeichnet die Anzahl der $r$-Permutationen einer $n$-Menge ($1\leq
r\leq n$)

\begin{satz} 
\[ P(n,r) = n \cdot (n-1) \cdot \ldots \cdot (n-r+1) \]
\begin{proof}[Anwendung der Produktregel, r-stufiger Entscheidungsprozess]
1. Stufe: Wähle ein Element aus $N$: $n$-Möglichkeiten\\
2. Stufe: Wähle ein Element aus $N$: $(n-1)$-Möglichkeiten\\
\vdots\\
r. Stufe: Wähle ein Element aus $N$: $(n-r+1)$-Möglichkeiten
\end{proof}
\end{satz}

Speziell gilt: $P(n,n)= n\cdot (n-1)\cdot (n-2)\cdot \dots \cdot 2\cdot 1 =n!$

Damit gilt:
\[ P(n,r)= \frac{n!}{(n-r)!} \]

Außerdem legen wir fest:
\[ P(n,r) = \frac{n!}{(n-r)!} := n^{\underline{r}}\]
heißt \highl{fallende Faktorielle}.

\subsubsection{Permutation mit Wiederholung (m.W.)}
Eine $r$-Permutation m.W. einer $n$-Menge ist $\define$ ein $r$-Tupel
($\rightarrow$ Reihenfolge) von (beliebigen, $\rightarrow$ m.W.) Elementen aus 
$N$ (d.\,h. ein Element von $\underbrace{N\times \dots \times N}_{r\textrm{-Mal}}
=: N^r$.

\begin{satz}
Die Anzahl der $r$-Permutationen m.W. einer $n$-Menge beträgt $n^r$.
\begin{proof}
Wieder Produktregel mit $r$-stufigem Entscheidungsprozess. Auf jeder Stufe hat
man $n$ Möglichkeiten.
\end{proof}
\end{satz}

\subsubsection{Kombination ohne Wiederholung (o.W.)}
Gegeben sei eine $n$-Menge $N$.

Eine $r$-Kombination o.W. von $N$ ist $\define$ $r$-Teilmenge ($\rightarrow$
Reihenfolge) von $N$.

$C(n,r)$ bezeichnet die Anzahl der $r$-Kombinationen o.W. einer $n$-Menge
$(1\leq r\leq n)$!
\begin{satz}
\[ C(n,r) = \frac{n!}{(n-r)!\,r!} \]
\begin{proof}
Zusammenhang zw. $C(n,r)$ und $P(n,r)$: Jede $r$-Teilmenge liefert $P(r,r)=r!$
verschiedene $r$-Tupel verschiedener Elemente aus $N$.

Also gilt: $C(n,r)\cdot r! = P(n,r)$

Also: $C(n,r) = \frac{P(n,r)}{r!} = \frac{n!}{(n-r)!\,r!}$
\end{proof}
\end{satz}

Wir legen fest:
\[ C(n,r) = \frac{n!}{(n-r)!\,r!} =: \binom{n}{r} \]
heißt \highl{Binomialkoeffizient}.

\subsubsection{Kombination mit Wiederholung (m.W.)}

In jeder Menge spielt weder die Reihenfolge noch die Vielfachheit ihrer Elemente
eine Rolle.

z.\,B.: $\{1,2,3\}=\{3,2,1\}=\{1,2,2,3,3,3\}$

In einer sog. \highl{Multi-Menge} spielt die Vielfachheit eine Rolle:\\
$\{1,2,3\} \neq \{1,2,2,3,3,3\} \neq \{1,1,2,2,3,3\}$

Das heißt in einer Multi-Menge wird die Vielfachheit der Elemente gezählt (aber
nicht die Reihenfolge berücksichtigt)

Eine $r$-Kombination m.W. einer $n$-Menge $N$ $\define$ eine $r$-Multiteilmenge
der Menge $N$.

\begin{satz}
Die Anzahl der $r$-Kombinationen m.W. einer $n$-Menge ist \[ \binom{n-r+1}{r} \]
\begin{proof}[Gleichheitsregel]
\underline{1. Variante}

Es sei $X$ die Menge aller $r$-Kombinationen m.W. einer gegebenen $n$-Menge
$N=\{1,2,\ldots,n\}$

Ferner sei $Y$ die Menge aller $r$-Teilmengen der Menge
$\{1,2,\dots,n,n+1,\ldots,n+r-1\}$

Damit ist klar: $\card Y= \binom{n+r-1}{r}$\\
(gemäß obiger Abschnitt, Kombination o.W.)

\underline{Behauptung}: Es gibt eine Bijektion zwischen $X$ und $Y$!

\underline{Schreibweise}: Es sei $\{a_1,a_2,\dots,a_r\}\in X$

\obda sei $1\leq a_1\leq a_2 \leq \dots \leq a_r\leq n$\\
Dies beschreiben wir durch \[ \{a_1\leq a_2\leq \ldots \leq a_r\} \]

Wir definieren eine Abbildung, die als Elemente des Definitionsbereiches solche
Objekte hat.

Die Elemente des Wertebereiches sind gewöhnliche $r$-Teilmengen von
$\{1,2,\dots,n+r-1\}$

Es sei $\varphi(\{a_1\leq a_2\leq \ldots \leq a_r\})\edefine \{a_1 < a_2 +1 < a_3
+2 < \dots < a_r + (r-1)\}$,\\
definiert für $\{a_1\leq \ldots \leq a_r\}\in X$.

Wir halten fest:
\begin{itemize}
   \item dies ist eine (Multi)Menge mit $r$ Elementen für die gilt $1\leq a_1$
   und $a_r \leq n+(r-1)$
   \item da $a_i\leq a_{i+1}$, folgt $a_i +(i-1) < a_{i+1} +i$
\end{itemize}
Also ist $\{a_1 < a_2 +1 < \ldots < a_r+(r-1)\}\in Y$

Es bleibt zu zeigen, dass die Abbildung $\varphi$ zwischen $X$ und $Y$ bijektiv
ist.

Dies realisieren wir durch die Angabe einer Umkehrabbildung $\gamma$ $Y$ nach
$X$.

Es sei $\gamma(\{b_1<b_2<\ldots<b_r\})\edefine \{b_1\leq (b_2 -1)\leq (b_3 -2)\leq
\ldots \leq (b_r -(r-1))\}$,\\
definiert für $\{b_1 < b_2 < \ldots < b_r\}\in Y$.

Wir halten fest:
\begin{itemize}
   \item $1\leq b_1$ und $b_r -(r-1)\leq n+r-1 - (r-1)\leq n$
   \item da $b_i < b_{i+1}$ folgt $b_i -(i-1)\leq b_{i+1} -i$
\end{itemize}
Und es gilt: $\varphi \circ \gamma = Id_x$ und $\gamma \circ \varphi = Id_y$

\underline{2. Variante}: Wir beschreiben die $r$-Multimenge von $N$ durch eine
geeignete Codierung. Dazu benötigen wir ein Alphabet mit zwei Buchstaben
\[ \Sigma = \{ |,\ *\} \]
Dabei ist $*$ein Platzhalter für die Vielfachheiten der Elemente und $|$
codiert die Elemente von $N$ auf folgende Weise:\\
vor dem $i$-ten Strich steht das Element $n$.
Beispiel: 
\begin{gather*}
N=\{1,2,3,4,5\}\\
\{1,2,2,3,3,3\},\ \{1,1,2,2,3,3\},\ \{5,5,5,5,5,5\}
\end{gather*}
Dies sind 3 verschiedene 6-Multimengen von $N$.

Zur Codierung benötigen wir: 6-mal $*$als Platzhalter und $(5-1)$-mal $|$ als
Trennungssymbol.
\begin{gather*}
*|**|***|,\ **|**|**||,\ ||||******
\end{gather*}
Diese codierung ist eindeutig, d.\,h. wir haben eine bij. Zuordnung zwischen den
$r$-Multimengen und diesen Codewörtern.

Wie viele derartige Codewörter gibt es?\\
$r$-mal $*$ und $(m-1)$-mal $|$ bedeutet: $n+r-1$ Buchstaben.

Es gibt genauso viele Codewörter, wie es Möglichkeiten gibt, $r$-mal $*$ auf
$n+r-1$ Plätze zu verteilen.

Hierfür gilt gerade: $\binom{n+r-1}{r}$ Möglichkeiten.
\end{proof}
\end{satz}

\section{Binominalkoeffizienten}
\begin{satz}[Elementare Eigenschafte]
\begin{align}
\label{2.6.1}\binom{n}{r}=\binom{n}{n-r} && \textrm{(Symetrie)}\\[1em]
\label{2.6.2}\binom{n}{r}=\binom{n-1}{r-1}+\binom{n-1}{r} && \textrm{(Rekursion)}
\end{align}
\begin{proof}
zu \autoref{2.6.1} zwei Varianten:

\underline{1. Variante}: per Rechnung
\[ \binom{n}{r} = \frac{n!}{r!\,(n-r)!} = \frac{n!}{(n-r)!\,(n-(n-r))!} =
\binom{n}{n-r} \]

\underline{2. Variante}: per Gleichheitsregel

Es gibt eine bijektive Zuordnung zwischen den $r$-Teilmengen $A$ von $N$ und den
$(n-r)$-Teilmengen $B$ von $N$ durch $B=N-A=\overline{A}$\\
und deshalb gilt: $\binom{n}{r}=\binom{n}{n-r}$ (ohne Rechnen)

zu \autoref{2.6.2} zwei Varianten:

\underline{1. Variante}: per Rechnung - durch vollständige Induktion

\underline{2. Variante}: mit Gleichheitsregel

Ausgangspunkt sei eine $n$-Menge $N$.

Wir fixieren ein Element $a_0\in N$ und wir klassifizieren die $r$-Teilmengen
von $N$ danach, ob sie $a_0$ enthalten oder nicht.

\emph{1. Frage}: Wie viele $r$-Teilmengen gibt es, die $a_0$ enthalten?\\
So viele, wie es $(r-1)$-Teilmengen einer $(n-1)$-Menge gibt, also
$\binom{n-1}{r-1}$

\emph{2. Frage}: Wie viele gibt es, die $a_0$ nicht enthalten?\\
So viele, wie es $r$-Teilmengen einer $(n-1)$-Menge gibt, also $\binom{n-1}{r}$.

Die Summenregel liefert:\\
es gibt $\binom{n-1}{r-1}+\binom{n-1}{r}$ $r$-Teilmengen von $N$.
\end{proof}
\end{satz}

Diese Eigenschaften liefern die Darstellung der Binomialkoeffizienten im
\highl{PASCALschen Dreieck}.
\help{Bild mit pascaldreieck bis 3 fehlt}

Beobachtung:
\begin{itemize}
   \item $\binom{n}{n} = \binom{n}{0} = 1$
   \item $\binom{n}{1} = \binom{n}{n-1} = n$
\end{itemize}

\emph{Frage}: Woher kommt die Bezeichnung "`Binominalkoeffizient"'?

\begin{satz}[Binomischer Satz]
\[ (x+y)^n = \sum_{r=0}^n \binom{n}{r}\,
\underbrace{x^{n-r}\,y^r}_{\textrm{Binom}} \]
\begin{proof} zwei Varianten:

\underline{1. Variante}: per Rechnung - vollständige Induktion

\underline{2. Variante}: mit Gleichheitsregel - Übersetzung in ein
Schubfachmodell

linke Seite: Produkt aus Summen: $n$-mal den Term $(x+y)$ ($\rightarrow\ n$
Schubfächer).

Das Distributivgesetz liefert durch Ausmultiplizieren eine Summe von Produkten
der Form $x^a y^b ,\ a+b=n$. Dies schreiben wir als $x^{n-r}y^r$. (Dies sind die
Summanden der rechten Seite)

\emph{Frage}: Wie oft kommt der Summand $x^{n-r}y^r$ vor?\\
So oft, wie es Möglichkeiten gibt, sich in $n$ Schubfächern $r$-mal für
$y$ zu entscheiden (und damit $(n-r)$-mal für $x$ in den restlichen
Fächern). Diese Anzahl ist $\binom{n}{r}$.
\end{proof}
\end{satz}

\subsection{Spezialfälle}
\begin{enumerate}
   \item 
   \[x=1,\ y=1\qquad\rightarrow (1+1)^n=\sum_{r=0}^n \binom{n}{r}\cdot 1= 2^n\]
   Dies ist gerade die Zeilensumme im Pascalschen Dreieck. Sie besagt: die
   Anzahl der Teilmengen einer $n$-Menge klassifiziert nach der Kardinalität
   der Teilmengen ist gemäß Summenregel $2^n$.
   
   \item 
   \[x=1,\ y=-1\qquad \rightarrow (1-1)^n = \sum_{r=0}^n \binom{n}{r}\cdot
   1^{n-r}\cdot (-1)^r = 0 \]
   Dies entspricht: 
   \[ \binom{n}{0}+\binom{n}{2}+\binom{n}{4}+\ldots = \binom{n}{1}+\binom{n}{3}
   +\binom{n}{5}+\ldots \]
   Dies bedeutet: für jede $n$-Menge gibt es genau so viele Teilmengen mit
   gerader Kardinalität, wie mit ungerader, also jeweils $2^{n-1}$.

   \item \[x=1,\ y=x\qquad \rightarrow (1+x)^n = \underbrace{\sum_{r=0}^n
   \binom{n}{r}\,x^r}_{\textrm{Polynom aus Binominialkoeff.}}\]
   Also sind in diesem Term alle Informationen über diese
   Binominialkoeffizienten "`codiert"'.\\
   Deshalb heißt die Funktion $f(x) = (1+x)^n$ \highl{erzeugende Funktion}
   für die Binominialkoeffizienten.
\end{enumerate}

Spaltensummen des PASCALschen Dreiecks:\\
eine Möglichkeit: wir betrachten 
\[ \binom{r}{r},\ \binom{r+1}{r},\ldots,\binom{m}{r} \]
Dies sind die Spalten "`von rechts oben nach links unten"' bis zu einer
vorgegebenen Zeile $m$.\\
Kurz:
\[ \sum_{i=r}^m \binom{i}{r} \]

Vereinbarung: $\binom{i}{r} := 0,\textrm{ falls } i<r$

Damit ist $\sum_{i=0}^m \binom{i}{r}$ sinnvoll.

\begin{satz}[Spaltensumme - obere Summation]
\[ \sum_{i=0}^m \binom{i}{r} = \binom{m+1}{r+1} \]
\begin{proof}
\begin{align*}
\sum_{i=0}^m \binom{i}{r} &=\underbrace{\binom{0}{r}+\ldots+\binom{r-1}{r}}_{0}
+\binom{r}{r}+\binom{r+1}{r}+\ldots+\binom{m}{r}\\
 &= \binom{r+1}{r+1}+\binom{r+1}{r}+\ldots+\binom{m}{r}\\
 &= \binom{r+2}{r+1}+\binom{r+2}{r}+\ldots+\binom{m}{r}\\
 & \vdots\\
 &= \binom{m}{r+1}+\binom{m}{r}\\
 &= \binom{m+1}{r+1}
\end{align*}
\end{proof}
\end{satz}

eine zweite Möglichkeit:\\
sind die Spalten "`von links oben nach rechts unten"':
\[ \binom{r}{0},\ \binom{r+1}{1},\ \ldots,\ \binom{r+i}{i},\ \ldots,\
\binom{r+m}{m} \]
bis zur Zeile $(r+m)$.

\begin{satz}[Spaltensumme - paralelle Summation]
\[ \sum_{i=0}^m \binom{r+i}{i} = \binom{r+m+1}{m} \]
\begin{proof}
\begin{enumerate}
   \item benutzt Symmetrie
   \item Rekursion analog zur oberen Summation
\end{enumerate}
\end{proof}
\end{satz}

\subsection{Produkte der Binominialkoeffizienten}
Als Beispiel der folgende
\begin{satz}[Vandermonsche Identität]
\[ \binom{m+n}{r} = \sum_{k=0}^r \binom{m}{k}\,\binom{n}{r-k} \]
\begin{proof}[ohne Rechnung - wir suchen ein passendes Modell]
Wir betrachten eine $m$-Menge $M$ und eine $n$-Menge $N$, mit $M\cap
N=\varnothing$ ($M,N$ disjunkt)

z.\,B.: $M=\{a_1,\ldots,a_m\},\ N=\{b_1,\ldots,b_n\}$

linke Seite: $\binom{m+n}{r}$ ist die Anzahl der $r$-Teilmengen von $M\cup N$
,$\card(M\cup N) = m+n$

rechte Seite: wir klassifizieren die $r$-Teilmengen von $M\cup N$ nach der
Anzahl $k$ der Elemente in $M$.

\begin{description}
   \item[0. Stufe] kein Element aus $M$: $\binom{m}{0}$\\
   diese werden durch die fehlenden $(r-0)$ Elemente aus $N$ ergänzt:
   $\binom{n}{r}$.\\
   Die Produktregel liefert: $\binom{m}{0}\,\binom{n}{r}$ Möglichkeiten eine
   $r$-Teilmenge von $M\cup N$ auszuwählen, die 0 Elemente aus $M$ beinhaltet.
   
   \item[k. Stufe] k Elemente aus $M$: $\binom{m}{k}$\\
   dazu $r-k$ Elemente aus $N$: $\binom{n}{r-k}$\\
   Produktregel: $\binom{m}{k}\,\binom{n}{r-k}$ Möglichkeiten
\end{description}

Summenregel:
\[ \sum_{k=0}^r \binom{m}{n}\,\binom{n}{r-k} \]
als Anzahl der $r$-Teilmengen von $M\cup N$.
\end{proof}
\end{satz}

\subsection{Multinomialkoeffizienten}

haben: Symmetrie $\binom{n}{r} = \binom{n}{n-r}$.

Dies läßt sich auch so schreiben:
\[ \binom{a+b}{a} = \binom{a+b}{b} \]
Dies rechtfertigt die folgende Schreibweise:
\[ \binom{a+b}{a,b} := \frac{(a+b)!}{a!\cdot b!} = \binom{a+b}{a} =
\binom{a+b}{b} \]

Eine formale Analogie liefert folgende
\begin{defini}[Trinominalkoeff.]
\[ \binom{a+b+c}{a,b,c} := \frac{(a+b+c)!}{a!\cdot b!\cdot c!} \]
\end{defini}

\begin{satz}[Trinomialsatz]
\[ (x+y+z)^n = \sum_{a+b+c+n} \binom{a+b+c}{a,b,c}\, x^a y^b z^c \]
\end{satz}
\begin{defini}[Multinomialkoeff.]
\[ \binom{a_1 + \ldots + a_k}{a_1 ,\ldots, a_k} := \frac{(a_1 + a_2 + \ldots +
a_k)!}{a_1 !\cdot a_2 !\cdot \dots \cdot a_k !} \]
\end{defini}
\begin{satz}[Multinomialsatz]
\[ (x_1 + x_2 + \ldots + x_k)^n = \sum_{a_1 + a_2 + \ldots + a_k =n} \binom{a_1
+ a_2 + \ldots + a_k}{a_1 ,\ldots, a_k}\, x_1^{a_1}\cdot \dots \cdot x_k^{a_k}
\]
\begin{proof}
\begin{align*}
\binom{a_1 + a_2 + \ldots + a_k}{a_1,a_2,\ldots,a_k} &=
\frac{(a_1+a_2+\ldots+a_k)!\, (a_1+a_2+\ldots+a_k)!}{a_1!\cdot a_2!\dots a_k!\,
(a_1+a_2+\ldots+a_k)!}\\
&= \frac{(a_1+a_2+\ldots+a_k)!}{a_1!\, (a_2+\ldots+a_k)}\cdot
\frac{(a_2+\ldots+a_k)!}{a_2!\dots a_k!}\\
&=\underbrace{\binom{a_1+a_2+\ldots+a_k}{a_2+\ldots+a_k}}_{(1)}
\cdot
\underbrace{\binom{a_2+\ldots+a_k}{a_2,\ldots,a_k}}_{(2)}
\end{align*}
(1): Anzahl der Möglichkeiten aus $n$ Termen der Form 
$(x_1+\ldots+x_n)$ genau $a_1$ -mal $x_1$ auszuwählen\\
(2): Anzahl der Möglichkeiten aus den restlichen $(n-a_1)$ Termen
irgendwie $x_1,x_2,\ldots,x_k$ auszuwählen, aber insgesamt genau 
$(a_2+\ldots+a_n)$-mal

Eine Rekursion liefert:
\[ =\binom{a_1+a_2+\ldots+a_k}{a_2+\ldots+a_k}\cdot
\binom{a_2+a_3+\ldots+a_k}{a_3+\ldots+a_k}\cdot
\binom{a_3+\ldots+a_k}{a_4+\ldots+a_k}\dots \binom{a_{k-1}+a_k}{a_k} \]
\end{proof}
\end{satz}

eine weitere Anwendung des Binominialkoeff.:
\subsection{geordnete Zahlpartitionen}
z.\,B. ist $1+1+1+2+2+3=10$ eine geordnete 6-Partition von 10.

\underline{Schreibweise}: Für positive nat. Zahlen $a_1,\ldots,a_r$ und $n$
ist \[ a_1+a_2+\ldots+a_r = n \] eine geordnete $r$-Partition von $n$. Also ist
$3+2+2+1+1+1=10$ eine weitere $r$-Partition von 10.

\emph{Frage}: Wie viele $r$-Partitionen von $n$ gibt es?

\begin{satz} Die Anzahl der geordneten $r$-Partitionen von $n$ beträgt
$\binom{n-1}{r-1}$.
\begin{proof}[Mithilfe der Gleichheitsregel]
$X$ sei die Menge der geordneten $r$-Partitionen von $n$ (die Elemente von $X$
schreiben wir als $a_1+a_2+\ldots+a_r=n$)

$Y$ sei die Menge der $(r-1)$-Teilmengen der Menge $\{1,\ldots,n-1\}$

wissen: $\card Y = \binom{n-1}{r-1}$

wir definieren folgende Abbildung:
\[ \varphi (a_1+a_2+\ldots+a_r=n) \edefine
\{a_1,a_1+a_2,a_1+a_2+a_3,\ldots,a_1+a_2+\ldots+a_r\} \]
Hierfür gilt:
\begin{enumerate}
   \item $X$ ist der Definitionsbereich von $\varphi$
   \item $\varphi$ bildet nach $Y$ ab, denn es gilt:\\
   $\underbrace{1\leq a_1< a_1+a_2 < a_1+a_2+a_3 < \ldots < a_1+\ldots+a_{r-1}
   \leq n-1}_{(r-1)\textrm{-Teilmenge von } Y}$
\end{enumerate}

es bleibt zu zeigen: $\varphi$ ist bijektiv.

Dies zeigen wir durch Angabe einer Umkehrabbildung $\sigma$:
\begin{gather*} \sigma (\{b_1,\ldots,b_{r-1}\}) \edefine
b_1+(b_2-b_1)+\ldots+(b_{r-1}-b_{r-2})+(n-b_{r-1})\\
\varphi \circ \sigma = Id_X,\qquad \sigma \circ \varphi = Id_Y
\end{gather*}
\end{proof}
\end{satz}

\section{Das Prinzip der Inklusion und Exklusion}
Aufgabe: Bekannt ist, dass die PIN-Codes von EC-Karten aus 4 Ziffern
$\{0,1,\ldots,9\}$ bestehen. Wie viele Codes gibt es, die eine Ziffer $(1)$ und
eine Ziffer $(2)$ und eine Ziffer $(3)$ enthalten?

Es sei $Z=\{0,1,\ldots,9\}$

$Z^r$ bezeichnet die Menge aller Wörter der Länge $r$ mit Buchstaben aus
$Z$. Dabei ist $Z$ das zugrundeliegende Alphabet \[ Z^r = \{z_1 z_2 \ldots z_r\
|\ 1\leq i \leq r : z_i\in Z\} \]
am Beispiel: $Z^4 = \{z_1 z_2 z_3 z_4\ |\ z_1,z_2,z_3,z_4 \in Z\}$

\[ D_1^r = \left\{z_1\ldots z_r \in Z^r\ |\ \textrm{ für ein } i\in
\left\{1,\ldots,r\right\} \textrm{ gilt }:z_i=1\right\} \]
entsprechend $D_2^r$ und
\[ D_3^r = \left\{z_1\ldots z_r \in Z^r\ |\ \textrm{ für ein } i\in
\left\{1,\ldots,r\right\} \textrm{ gilt }:z_i=3\right\} \]

\underline{Bemerkung}: "`es gibt eine Ziffer"' wird stets gebraucht wie in
$\exists z_1$ (also "`es gibt \underline{min.} eine Ziffer\dots"')

Gesucht ist also folgende Anzahl: $\card (D_1^r \cap D_2^r \cap D_3^r)$

Der nächste Schritt:
\[ M_1^r \edefine \left\{ z_1\ldots z_r \in Z^r\ |\ \textrm{ für alle } i\in
\left\{1,\ldots,r\right\} \textrm{ gilt: } z_i\ne 1\right\} \]
gilt: $M_1^r = Z^r \mminus D_1^r$. Entsprechend werden $M_2^r$ und $M_3^r$
definiert.

Für diese Mengen gilt:
\begin{align*}
D_1^r \cap D_2^r \cap D_3^r &= (Z^r \mminus M_1^r)\cap (Z^r \mminus M_2^r)\cap
(Z^r \mminus M_3^r)\\
&=Z^r \mminus (M_1^r \cup M_2^r \cup M_3^r)
\end{align*}

Es genügt also $\card(M_1^r \cup M_2^r \cup M_3^r)$ zu bestimmen. ($\card Z^r$
bekannt)

1. Versuch:
\[ \card(M_1^r \cup M_2^r \cup M_3^r) = \card M_1^r + \card M_2^r + \card M_3^r
\]
wäre korrekt, wenn $M_{1|2|3}^r$ \underline{disjunkt} wären. (Was nicht der
Fall ist)

2. Versuch:
\begin{align*}
\card(M_1^r \cup M_2^r \cup M_3^r) =& \card M_1^r + \card M_2^r + \card M_3^r\\
&- \card(M_1^r \cap M_2^r) - \card(M_1^r\cap M_3^r) - \card(M_2^r\cap M_3^r)
\end{align*}
Fehlerhaft für alle $z_1 z_2 z_3 z_4$ mit $\forall i\ z_i \ne \{1,2,3\}$

3. Versuch:
\begin{align*}
\card(M_1^r \cup M_2^r \cup M_3^r) =& \card M_1 + \card M_2^r + \card M_3^r\\
&- \card(M_1^r \cap M_2^r) - \card(M_1^r\cap M_3^r) - \card(M_2^r\cap M_3^r)\\
&+\card(M_1^r \cap M_2^r \cap M_3^r)
\end{align*}

Behauptung: Antwort 3 ist korrekt!

Begründung mit Fallunterscheidung nach der Zugehörigkeit zur Menge:

1. Fall: Codewort gehört zu genau einer der Mengen $M_1^r,M_2^r,M_3^r$ (z.\,B.
$z_1 z_2 \ldots z_r \in M_1^r$, aber $z_1 \ldots z_r \notin M_2^r$ und $z_1
\ldots z_r \notin M_3^r$)\\
links (LGS): einmal gezählt\\
rechts (RGS): einmal gezählt

2. Fall: Codewort gehört zu genau zwei der Mengen\\
LGS: einmal gezählt\\
RGS: zweimal addiert, einmal subtrahiert

3. Fall: Codewort gehört zu allen Mengen\\
LGS: einmal gezählt\\
RGS: dreimal addiert, dreimal subtrahiert, einmal addiert

Für unser Beispiel gilt:
\begin{gather*}
\card M_k^r = 9^r\qquad k=1,2,3\\
\card(M_k^r \cap M_j^r) = 8^r\qquad k\ne j,\ j\in 1,2,3\\
\card(M_k^r \cap M_j^r \cap M_i^r) = 7^r
\end{gather*}

Damit ist:
\[ \card(M_1^r \cup M_2^r \cup M_3^r) = 3\cdot 9^r - 3\cdot 8^r + 7^r \]
und damit
\[ \card(D_1^r \cap D_2^r \cap D_3^r) = 10^r - 3\cdot 9^r + 3\cdot 8^r - 7^r \]
Verallgemeinerung der Aufgabenstellung:

Gegeben seien $n$ Mengen $M_1,\ldots,M_n$ über dem Grundbereich $U$ (jede
Menge $M_i$ ist durch eine Eigenschaft $E_i$ definiert)

\underline{Aufgabe}: Bestimme $\card(M_1\cup \ldots \cup M_n)$!

Wir definieren folgende Größen:
\begin{align*}
S_1 \edefine &\card M_1 + \card M_2 + \ldots + \card M_n = \sum_{i=1}^n \card
M_i\\
S_2 \edefine &\card(M_1\cap M_2) + \card(M_1\cap M_3)+\ldots+\card(M_1\cap
M_n)\\
& \qquad + \card(M_2 \cap M_3)+\ldots+\card(M_2\cap M_n)\\
& \qquad \quad \ddots\\
& \qquad \qquad +\card(M_{n-1} \cap M_n)\\
=& \sum_{1\leq i_1 < i_2 \leq n} \card(M_{i_1} \cap M_{i_2})\\
S_3 \edefine & \sum_{1\leq i_1 < i_2 < i_3 \leq n} \card(M_{i_1} \cap M_{i_2}
\cap M_{i_3})\\
S_j \edefine & \sum_{1\leq i_1 < \ldots < i_j \leq n} \card(M_{i_1} \cap \ldots
\cap M_{i_j})\\
S_n \edefine & \card(M_1 \cap \ldots \cap M_n)\\
S_{Gesamt} \edefine & \card U\\
S_* \edefine & \card(M_1 \cup M_2 \cup \ldots \cup M_n)\\
S_0 \edefine & \card(\overline{M_1} \cap \overline{M_2} \cap \ldots \cap
\overline{M_n}) \qquad (\overline{M_i} = U\mminus M_i)
\end{align*}

\begin{satz}[Inklusions-Exklusions-Prinzip (IEP)]
\begin{align*}
S_* = & S_1 - S_2 + S_3 - S_4 + \ldots + (-1)^{j-1} S_j + \ldots + (-1)^{n-1}
S_n\\
= & \sum_{i=1}^n (-1)^{i-1}\, S_i\\
S_0 = & S_{Gesamt} - S_* = S_{Gesamt} + \sum_{i=1}^n (-1)^i\, S_i
\end{align*}
\begin{proof}
Wir zählen die Vielfachheiten, mit denen Elemente aus $U$ in dieser Formel
gezählt werden.

Dazu klassifizieren wir die Elemente nach der Anzahl der Mengen, zu denen sie
gehören.

Wir unterscheiden $n$ Fälle:

Fall $j$: $(1\leq j\leq n)$\\
Wir betrachten solche Elemente, die zu genau $j$ der gegebenen $n$ Mengen
gehören.

links: es wird (in $S_*$) einmal gezählt\\
rechts: 
\begin{itemize}
   \item in $S_1$: es wird $j$-mal gezählt
   \item in $S_2$: es wird $\binom{j}{2}$-mal gezählt (in jeder 2-Menge von
   Indizes von Mengen zu denen es gehört)
   \item in $S_3$: es wird $\binom{j}{3}$-mal gezählt\\$\vdots$
   \item in $S_j$: es wird $\binom{j}{j}$-mal gezählt
\end{itemize}
Damit ergibt sich für die Vielfachheit:
\begin{align*}
& \binom{j}{1}-\binom{j}{2}+\binom{j}{3}-\ldots+(-1)^{j-1}\binom{j}{j}\\
=& \Big[ \binom{j}{0} - \binom{j}{0} \Big] + \binom{j}{1} -
\binom{j}{2}+\binom{j}{3}-\ldots+(-1)^{j-1}\binom{j}{j}\\
=& \binom{j}{0} - \Big[ \binom{j}{0} -
\binom{j}{1}+\binom{j}{2}-\ldots+(-1)^j\binom{j}{j} \Big] \\
=& \binom{j}{0} - [ 1 - 1 ]^j = 1
\end{align*}
\end{proof}
\end{satz}

\subsection{Anwendungen des IEP}
\subsubsection{Unordnungen}
Aufgabe: Gegeben seien $n$ Briefe und $n$ adressierte Kuverts.

\emph{Frage}: Wie viele Möglichkeiten gibt es, die Briefe den Umschlägen so
zuzuordnen, dass kein Brief richtig adressiert ist?

Formalisierung: Ausgangspunkt ist eine $n$-Menge $N=\{1,2,\ldots,n\}$. Jede
Zuordnung läßt sich beschreiben als eine Abbildung von $N$ auf $N$
(bijektiv).

Schreibweise:
\[ \pi = \binom{1\ 2\ 3\ \ldots\ n}{\pi(1)\ \pi(2)\ \pi(3)\ \ldots\ \pi(n)} \]
ist eine $(n,n)$-Permutation.

$i\in N$ heißt \highl{Fixpunkt} von $\pi \define \pi(i)=i$

Mathematische Aufgabe: bestimme die Anzahl der Permutationen ohne Fixpunkte.

Um IEP anwenden zu können, definieren wir $n$ Eigenschaften.

Für $i\in N$: Eine Permutation $\pi$ besitzt die Eigenschaft
\[ E_i \define \pi(i)=i \]

$S_1$ ist die Anzahl der Permutationen mit einem Fixpunkt:
\[ S_1 = n\cdot (n-1)! \]
Wobei $n$ die Anzahl der Möglichkeiten darstellt, den Fixpunkt zu verteilen
und $(n-1)!$ die Anzahl der Mögl. die verbleibenden Elemente anzuordnen.

$S_2$ ist die Anzahl der Permutationen mit zwei Fixpunkten:
\begin{align*}
S_2 =& \binom{n}{2} \cdot (n-2)!\\
\vdots &\\
S_j =& \binom{n}{j} \cdot (n-j)!\\
S_n =& 1 = \binom{n}{n} \cdot 0!\\
S_{Gesamt} =& n!
\end{align*}
Bestimme $S_0$!
\begin{align*} 
S_0 &= S_{Gesamt} - S_1 + S_2 - S_3 + \ldots + (-1)^n S_n\\
&= n! - \binom{n}{1}(n-1)!+\ldots + (-1)^j\binom{n}{j}(n-j)! +\ldots +
(-1)^n\binom{n}{n} (n-n)!
\end{align*}

Exkurs in die Analysis:
\begin{gather}
e^x = \sum_{n=0}^{\infty} \frac{x^n}{n!} \qquad \textrm{ (Potenzreihe)}\\
\sum_{k=n+1}^{\infty} \frac{x^k}{k!} \leq \frac{1}{(n+1)!}
\end{gather}
Spezialfall: $x= -1$
\[ e^{-1} = \sum_{n=0}^{\infty} \frac{(-1)^n}{n!} \qquad \sum_{k=n+1}^{\infty}
\frac{(-1)^k}{k!} \leq \frac{1}{(n+1)!} \]
\begin{align*}
S_0 &= n! - \frac{n!}{1! (n-1)!}\cdot (n-1)!+ \ldots +(-1)^j\cdot \frac{n!}{j!
(n-j)!}\cdot(n-j)!+\ldots + (-1)^n\cdot \frac{n!}{n!\, 0!}\cdot 0!\\
&= n!\Big[ \sum_{n=0}^{\infty} \frac{(-1)^n}{n!} - \sum_{k=n+1}^{\infty}
\frac{(-1)^k}{k!} \Big]
\end{align*}
\begin{align*}
\frac{n!}{e} = n! \sum_{n=0}^{\infty} \frac{(-1)^n}{n!} = \sum_{k=n+1}^{\infty}
\frac{(-1)^k}{k!} \cdot n! + S_0 &\leq S_0 + n!\,\frac{1}{(n+1)!}\\
&\leq S_0 + \frac{1}{n+1}
\end{align*}
Also gilt: $|S_0 + \frac{n!}{e}| \leq \frac{1}{n+1}$

$S_0$ ist diejenige nat. Zahl, die am "`dichtesten"' an $\frac{n!}{e}$ liegt:
\[ S_0 \sim \frac{n!}{e} \]

\emph{Frage}: Wie groß ist die Wahrscheinlichkeit dafür, dass bei einer
willkürlichen Zuordnung eine solche Unordnung entsteht?

\begin{align*} 
\textrm{relative Häufigkeit } &= \frac{\textrm{Anzahl der günstigen
Fälle}}{\textrm{Anzahl der möglichen Fälle}}\\
&= \frac{\textrm{Anzahl der Unordnungen von } n \textrm{
Elementen}}{\textrm{Anzahl der Permutationen von } n \textrm{ Elementen}}\\
&= \frac{S_0}{n!} \sim \frac{\frac{n!}{e}}{n!} = \frac{1}{e} \sim 0.36\ldots
\end{align*}
Dies ist unabhänig von $n$.

\subsubsection{Die Eulersche $\varphi$-Funktion}
In der Zahlentheorie spielt die folgende Funktion eine wesentliche Rolle:
\[ \varphi(n) \edefine \card\{m\ |\ 1\leq m\leq n \textrm{ und (m und n sind
teilerfremd)}\} \]
$D_\varphi \colon [1,\infty )$

$m$ und $n$ sind teilerfremd $\define\ \ggT(m,n)=1$

\begin{bsp} $n=360\ \varphi(n)?$
Es gilt: $n=2^3\cdot 3^2\cdot 5$

$m$ ist teilerfremd zu $n$ gdw. $m$ ist weder durch 2,3 oder 5 teilbar.

Wir definieren folgende drei Eigenschaften: für $p\in \{2,3,5\}$; $m$ besitzt
die Eigenschaft 
\[ E_p \edefine p \textrm{ ist Teiler von } m\quad (p\setminus m) \]
entsprechend
\[ M_p =\{ m\ |\ 1\leq m\leq n \textrm{ und } p\setminus m\} \]
Nach IEP gilt: $\varphi(360) = S_0 = S_{Gesamt} - S_1 + S_2 - S_3$
\begin{align*}
S_{Gesamt} =& \card\{m\ |\ 1\leq m\leq 360\}=360\\
S_1 =& \card M_2 + \card M_3 + \card M_5\\
=& \card\{m\ |\ 1\leq m\leq 360 \land 2\setminus m\} + \card\{m\ |\ 1\leq m\leq
360 \land 3\setminus m\}\\
&+ \card\{m\ |\ 1\leq m\leq 360 \land 5\setminus m\}\\
=&\ 360/2 + 360/3 + 360/5 = 180 + 120 + 72 = 372
\end{align*}
Für Primziffern $p_1 \ne p_2$ gilt: $p_1\setminus m$ und $p_2\setminus m$ gdw.
$p_1\cdot p_2 \setminus m$
\begin{align*}
S_2 =& \card(M_2\cap M_3) + \card(M_2\cap M_5) + \card(M_3\cap M_5)\\
=& \card\{m\ |\ 1\leq m\leq 360\land 6\setminus m\} + \card\{m\ |\ 1\leq m\leq
360 \land 10\setminus m\}\\
&+ \card\{m\ |\ 1\leq m\leq 360 \land 15\setminus m\}\\
=&\ 360/6 + 360/10 + 360/15 = 60 + 36 + 24 = 120\\
S_3 =& \card(M_2\cap M_3\cap M_5) = \card\{m\ |\ 1\leq m\leq 360 \land
30\setminus m\}\\
=&\ 360/30 = 12
\end{align*}
\[ \varphi(360) = 360 - 372 + 120 - 12 = 96 \]
\end{bsp}

\underline{Exkurs in die Zahlentheorie}
\subsubsection{Fundamentalsatz der Arithmetik}
Jede nat. Zahl $n>1$ besitzt eine eindeutig bestimmte geordnete Zerlegung in
Potenzen von Primzahlen:
\begin{gather}\label{fundamentalarith}
n = p_1^{e_1}\cdot p_2^{e_2}\cdot \ldots \cdot p_k^{e_k}\textrm{ , wobei } p_1 <
p_2 < p_3 < \ldots < p_k
\end{gather}
Aufgabe: Es sei $n$ wie in \autoref{fundamentalarith} mit $n\in \N$ und $n>1$.
Bestimme $\varphi(n)$!

Das Beispiel liefert:
\begin{fakt}
$m$ ist teilerfremd zu $n$ \underline{gdw} weder $p_1$ noch $p_2$ noch $\ldots$ 
noch $p_n$ sind Teiler von $n$.
\end{fakt}

Wir definieren für $1\leq j\leq k$
\[ M_{p_j} = \{m\ |\ 1\leq m\leq n \land p_j\setminus m\} \]
und
\[ M_{p_{i_1}}\cap M_{p_{i_2}} = \{m\ |\ 1\leq m\leq n\land p_{i_1}\cdot
p_{i_2}\setminus m\},\quad 1 \leq i_1 < i_2 \leq k \]
usw.
\begin{align*}
\varphi(n) =& S_0 = S_{Gesamt} - S_1 + S_2 \pm \ldots + (-1)^k \cdot S_k\\
S_{Gesamt} =& n = \card\{1\leq m\leq n\}\\
S_1=& \sum_{1\leq i_1\leq k} \!\card M_{p_{i_1}} = n/p_1 + n/p_2 + \ldots + n/p_k
&& \binom{k}{1} \textrm{ Summanden}\\
S_2 =& \sum_{1\leq i_1 < i_2\leq k} \!\card(M_{p_{i_1}}\cap M_{p_{i_2}}) =
\frac{n}{p_1\cdot p_2}+\frac{n}{p_1\cdot p_3}+\ldots+\frac{n}{p_{n-1}\cdot p_n}
&& \binom{k}{2} \textrm{ Summanden}\\
\vdots &\\
S_k =& \frac{n}{p_1\cdot p_2\cdot \ldots \cdot p_k} && \binom{k}{k} \textrm{
Summanden}
\end{align*}
\begin{align*}
\varphi(n) = S_0 = n\,\Big[ 1 -& \frac{1}{p_1} - \frac{1}{p_2} - \ldots -
\frac{1}{p_k}\\
+& \frac{1}{p_1\cdot p_2}+\frac{1}{p_1\cdot p_3}+\ldots+
\frac{1}{p_{k-1}\cdot p_k}\\
-& \frac{1}{p_1\cdot p_2\cdot p_3} - \ldots - \frac{1}{p_{k-2}\cdot
p_{k-1}\cdot p_k}\\
\vdots &\\
+&(-1)^k\, \frac{1}{p_1\cdot p_2\cdot \ldots \cdot p_k} \Big]
\end{align*}
Also:
\[ \varphi(n) =
n\,(1-\frac{1}{p_1})\,(1-\frac{1}{p_2})\,(1-\frac{1}{p_3})\dots(1-\frac{1}{p_k})
\]
\begin{satz}
\[ \varphi(n) = n\cdot \prod_{p\setminus n} (1-\frac{1}{p}) \]
\end{satz}
unser Beispiel: $\varphi(360) = 360\cdot 1/2 \cdot 2/3 \cdot 4/5 = 96$

\underline{weitere Eigenschaften:}
\begin{gather*}
\varphi(p) = p\cdot (1-\frac{1}{p})\\
\varphi(p^e) = p^e \cdot (1-\frac{1}{p})
\end{gather*}
Damit: (unter der Vor. $p\ne q$)
\begin{align*}
\varphi(p^e\cdot q^f) =& p^e\cdot q^f\, (1-\frac{1}{p})\,(1-\frac{1}{q})\\
=& p^e\,(1-\frac{1}{p})\cdot q^f\,(1-\frac{1}{q})\\
=& \varphi(p^e)\cdot \varphi(q^f)
\end{align*}

\begin{satz}
Die $\varphi$-Funktion ist multiplikativ.

Das heißt für nat. Zahlen $m$ und $n$, die Teilerfremd sind, gilt:
\[ \varphi(m\cdot n) = \varphi(m)\cdot \varphi(n) \]
\end{satz}
Ein anderer Blick auf $\varphi(n)$: $\varphi(n)$ ist die Anzahl der nicht mehr
kürzbaren Brüche von $1/n,\ldots, n/n$
\begin{bsp} 
n=12\\
\begin{tabular}{c c c c c c c c c c c c c c}
 & 1/12 & 2/12 & 3/12 & 4/12 & 5/12 & 6/12 & 7/12 & 8/12 & 9/12 & 10/12 & 11/12
 & 12/12\\
$\varphi(12)=4$ & 1/12 & & & & 5/12 & & 7/12 & & & & 11/12 & \\
$\varphi(6)=2$ & & 1/6 & & & & & & & & 5/6 & & & \\
$\varphi(4)=2$ & & & 1/4 & & & & & & 3/4 & & & & \\
$\varphi(3)=2$ & & & & 1/3 & & & & & 2/3 & & & & \\
$\varphi(2)=1$ & & & & & & 1/2 & & & & & & & \\
$\varphi(1)=1$ & & & & & & & & & & & & 1/1
\end{tabular}
$12=\varphi(12) + \varphi(6) + \varphi(4) + \varphi(3) + \varphi(2) +
\varphi(1)$

Das heißt $12=\sum_{t\setminus 12} \varphi(t)$
\end{bsp}
\begin{satz}
\[n = \sum_{t\setminus n} \varphi(t) \]
\end{satz}

\subsubsection{Surjektionen}
Gegeben seien zwei Mengen
\[ M=\{a_1,a_2,\ldots, a_m\} \textrm{ und } N=\{b_1,\ldots,b_n\} \textrm{ mit }
n\leq m \]
Aufgabe: Bestimme die Anzahl der Surjektionen von $M$ \underline{auf} $N$.

Wir halten fest:\\
\[ Abb(M,N)=\{f\ |\ f\colon M\mapsto N\} =: N^M \]
bezeichnet die Menge aller Abbildungen von $M$ nach $N$.

Dann gilt:
\[ \card Abb(M,N) = \card N^M = n^m \qquad \textrm{(Produktregel)} \]
$Surj(M,N) \edefine \{f\ |\ f\colon M\mapsto N\}$ bezeichnet die Menge aller
Abbildungen von $M$ auf $N$ ($D_f=M$, $W_f=N$).

Ansatz:

Für $1\leq i\leq n$ definieren wir:

Eine Abbildung $f\in Abb(M,N)$ besitzt die Eigenschaft $E_i \define b_i \notin
W_f$

Dann gilt: $f\in Surj(M,N)$ gdw $f$ besitzt weder $E_1$ noch $E_2$ noch $\ldots$
noch $E_n$.

Das heißt $\card Surj(M,N)=S_0=S_{Gesamt}-S_1+S_2-S_3\pm\ldots$

Für $1\leq j\leq n$ betrachten wir $j$-Tupel $1\leq i_1< i_2< \ldots < i_j\leq
n$

Hierfür sei $S_{i_1 i_2 \dots i_j}$ die Anzahl der Abb. die die $j$
Eigenschaften $E_{i_1}$, $E_{i_2}$ usw. erfüllen.

$f\in Abb(M,N)$ erfüllt die Eigenschaften $E_{i_1}$ und $E_{i_2}$ und $\ldots$
und $E_{i_j}$ \\gdw. $f\colon\ M\mapsto N\mminus \{b_{i_1}, b_{i_2},\ldots, b_{i_j}\}$

Es gibt genau $(n-j)^m$ solche Abb.

Es gibt $\binom{n}{j}$ Möglichkeiten zur Auswahl eines $j$-Tupels $1\leq i_1 <
i_2 < \ldots < i_j \leq n$.\\ Damit ergibt sich:
\[ S_j = \sum_{1 \leq i_1 < i_2 < \ldots < i_j \leq n} S_{i_1 i_2 \ldots i_j} =
\sum _{1\leq i_1 < i_2 < \ldots < i_j \leq} (n-j)^m = \binom{n}{j}(n-j)^m \]
Also: $S_0 = n^m - \binom{n}{1}\, (n-1)^m + \binom{n}{2}\, (n-2)^m \pm \ldots +
(-1)^n\binom{n}{n}(n-n)^m$

\begin{satz}
Für die Anzahl der Surjektionen gilt:
\[ \card Surj(M,N) = \sum_{k=0}^n (-1)^k\binom{n}{k}(n-k)^m \]
\end{satz}

\section{STIRLING-Zahlen}
andere Deutung von $\sum_{k=0}^n (-1)^k\, \binom{n}{k}\, (n-k)^m$:

Anzahl der Mögl. $m$ verschiedene Kugeln auf $n$ numerierte aber sonst gleiche
Fächer zu verteilen, so dass keines der Fächer leer bleibt.

Aufgabe: Bestimme die Anzahl der Mögl. $m$ Kugeln auf $n$ ununterscheidbare
Fächer zu verteilen, s.d. keines der Fächer leer bleibt. $(m\geq n)$

Jede solche Verteilung gibt Anlass zu $n!$ Numerierungen der Fächer.

\begin{defini}
Für $m\geq n$ heißt
\[ S_{m,n} := \frac{1}{n!}\, \sum_{k=0}^n (-1)^k\,\binom{n}{k}(n-k)^m \]
\highl{STIRLING-Zahl} 2. Art.
\end{defini}

\begin{satz}
Die Anzahl der Mögl. $m$ verschiedene Kugeln auf $n$ ident. Fächer zu
verteilen beträgt $S_{m,n}$.
\end{satz}

Folgerung: $\card Surj(M,N) = n!\cdot S_{m,n}$

Wir betrachten ein Beispiel einer Surj.

$m=6,\ n=3,\qquad M=\{1,2,3,4,5,6\},\ N=\{a,b,c\}$
\help{hier muss das Bild der Surj. hin} Jede solche Surj. wird vollständig
beschrieben durch $\big(f^{-1}(a);\; f^{-1}(b);\; f^{-1}(c)\big) =
\big(\{1,2\};\; \{3\};\; \{4,5,6\}\big)$\\
geordnete Zerlegung der Menge $M$ in $n$ Teilmengen.

\begin{defini} Es sei $M$ eine $m$-Menge.
$\mathfrak{j} \subseteq \mathfrak{P}(M)$ heißt $n$-Zerlegung von $M\ \define$
\begin{enumerate}
   \item $\mathfrak{j} = \{z_1,\ldots, z_n\} \qquad (\card \mathfrak{j} = n,\
   z_i\subseteq M)$
   \item $\bigcup_\mathfrak{j} = M$
   \item $i\ne j\qquad z_i\cap z_j=\varnothing$
   \item $z_i \ne \varnothing$
\end{enumerate}
\end{defini}

\begin{satz}
Die Anzahl der $n$-Zerlegungen einer $m$-Menge $M$ ist gegeben durch $S_{m,n}$.

Spezielle Werte für $S_{m,n}$:

\begin{align*}
S_{m,m} =&\ 1 & S_{m,1} =&\ 1\\
S_{m,m-1} =&\ \binom{m}{2} & S_{m,2} =&\ 2^{m-1} -1\\
m<n\ \colon&\quad S_{m,n} := 0
\end{align*}
\end{satz}

\emph{Frage}: Gibt es zur Berechnung der STIRLING-Zahlen in Analogie zu den
Binomialkoeff. eine Rekursionsbeziehung?

\emph{Ansatz}: Wir klassifizieren die $n$-Zerlegungen von $M$ nach einem
fixierten Element $a\in M$ (in Analogie zu den Binomialkoeff.)

1. Sorte: Die Zerlegungen von $M$, bei denen $a$ eine eigene Klasse bildet, d.\,h.
$\{a\}\in \mathfrak{j}$.\\
Die restlichen $(m-1)$ Elemente sind auf $(n-1)$ Klassen zu verteilen: hierfür
gibt es $S_{m-1,n-1}$ Möglichkeiten!

2. Sorte: Die $n$-Zerlegungen von $M$, bei denen $a$ in einer größeren
Klasse enthalten ist.\\
Die verbleibenden $(m-1)$ Elemente sind auf $n$ Klassen zu verteilen: hierfür
gibt es $n\cdot S_{m-1,n}$ Mögl. (der Faktor $n$ resultiert daraus, dass das
$a$ jeder der $n$ Klassen hinzugefügt werden kann).

\begin{satz}
Für die Stirling-Zahlen zweiter Art gilt die folgende Rekursionsbeziehung:
\[ m\geq n\geq 1\ :\ S_{m,n} := S_{m-1,n-1} + n\cdot S_{m-1,n} \]

Diese Rekursion liefert ein Dreieck der Stirling-Zahlen 2. Art:
\help{hier ein Image der Rekursionsbeziehung}
\end{satz}

\section{Dirichletsches Schubfachprinzip}
Formulierung im Schubfachmodell:
\begin{enumerate}
   \item Verteilt man $n=r+1$ Gegenstände in $r$ Schubfächer, dann gibt es
   ein Schubfach, das (min.) 2 Gegenstände enthählt.
   \item Verteilt man $n=k\cdot r+1$ Gegenstände auf $r$ Schubfächer, dann
   gibt es ein Fach, das (min.) $r+1$ Gegenstände enthählt.
   \item Verteilt man $n$ Gegenstände auf $r$ Fächer, dann gibt es ein Fach,
   das $\lfloor \frac{n-1}{r} \rfloor +1$ Gegenstände enthält.
   \item Verteilt man $n=l_1 + l_2 + l_3 + \ldots + l_r - r + 1$ Gegenstände
   auf $r$ Fächer, dann enthählt das 1. Fach $l_1$ Gegenstände oder das 2.
   Fach $l_2$ oder $\ldots$ oder das $r$-te Fach $l_r$ Gegenstände.
\end{enumerate}

Formulierungen als Abbildungen:

$\varphi\ \colon\ N \rightarrow R$, dabei ist $N$ eine $n$-Menge und
$R=\{b_1,b_2,\ldots,b_r\}$
\begin{enumerate}
   \item Falls $n\geq r+1$, dann existiert ein $i \in \{1,\ldots,r\}$ mit $\card
   \varphi^{-1}(b_i) \geq 2$
   \item Falls $n\geq k\cdot r+1$, dann existiert ein $i \in \{1,\ldots,r\}$ mit
   $\card \varphi^{-1}(b_i)\geq k+i$
   \item Falls $n\geq r$, dann existiert ein $i \in \{1,\ldots,r\}$ mit $\card
   \varphi^{-1}(b) \geq \rfloor \frac{n-1}{r} \rfloor +1$
   \item Falls $n \geq l_1 + l_2 + \ldots + l_r - r +1$, dann gilt: $\card
   \varphi^{-1}(b_1)\geq l_1$ oder $\card \varphi^{-1}(b_2)\geq l_2$ oder
   $\ldots$ oder $\card \varphi^{-1}(b_r) \geq l_r$
\end{enumerate}

\subsection{Anwendungen}
\subsubsection{Studenten}
Unter 367 Studenten befinden sich mindestens 2, die am selben Tag Geburtstag
haben.

\subsubsection{Haare}
Kein Mensch hat mehr als $100.000$ Haare auf dem Kopf.

Berlin hat 3,2 Mio. Einwohner. Dann gibt es $X$ Einwohner, die haargenau
dieselbe Haarzahl auf dem Kopf haben.
\[ \lfloor \frac{3.199.999}{100.001} \rfloor = 31 \]
Aussagen, die mit dem Schubfachschluss begründet werden, sind
Existenzaussagen.

\subsubsection{Kugeln}
Eine Urne enthählt 5 gelbe, 6 rote und 7 blaue Kugeln. Bestimmen Sie die
kleinste Anzahl von Kugeln, die gezogen werden müssen, um mit Sicherheit 3
rote oder 4 gelbe oder 5 blaue Kugeln zu haben.
\[r=3\ l_1=3\ l_2=4\ l_3=5\]
Dann gilt \[n=l_1+l_2+l_3-r+1=10\]
9 Züge reichen nicht: 2 rote + 3 gelbe + 4 blaue

\subsubsection{Mengen}
\[ S \subseteq \{1,\ldots,14\} \textrm{ mit }\card(S)=6 \]
Beweisen Sie, dass die Summen der Elemente aller nicht leeren Teilmengen von $S$
nicht alle verschieden sein können.
\[ S = 1,\ldots,4,5,\ldots,9,12,13\] \help{hier ist die Kopie undeutlich, hat
jemand was anderes?}

1. Versuch:
$S$ besitzt $2^6 -1=63$ nicht leere Teilmengen $A$

$S_A$ sei die Summe der Elemente aus $A$

Dann gilt $1\leq S_A \leq 9+10+11+12+13+14=69$

Damit haben wir 69 mögliche Werte (Schubfächer) auf 63 Teilmengen
(Gegenstände) zu verteilen. Daraus folgt: der Schubfachschluss sagt 
\underline{nichts} aus.

2. Versuch:

Wir betrachten echte nicht leere Teilmengen von $S$, was 62 Teilmengen ergibt.

Mögliche Summen: $1\leq S_A \leq 10+11+12+13+14=60$

Wir verteilen 62 Teilmengen (Gegenstände) auf 60 Fächer (Summen)

Damit gibt es 2 (echte) nichtleere Teilmengen von $S$, deren Summe gleich ist.

\subsubsection{Quadrate}
Unter je 5 Punkten eines Einheitsquadrates gibt es stets zwei Punkte deren
Abstand nicht größ er als $\frac{1}{\sqrt{2}}$ ist.
\help{Bild eines Einheitsquadrates mit radius $\frac{1}{\sqrt{2}}$ und
Einteilung mit Quadranten}

Zwischen einem der 4 Quadrate mit Seitenlänge 1/2 müssen 2 Punkte liegen,
die nicht weiter als $\frac{1}{\sqrt{2}}$ entfernt liegen können.

\subsubsection{Bekannte}
Unter je sechs Personen gibt es stets drei Personen, die entweder paarweise
untereinander bekannt sind oder paarweise nicht miteinander bekannt sind.

Seien $A,B,C,D,E,F$ die 6 Personen.

Wir unterscheiden sie dadurch, ob sie $A$ kennen.

Zimmer 1: alle Personen, die $A$ kennen.\\
Zimmer 2: alle Personen, die $A$ nicht kennen.

($A$ wird keinem Zimmer zugeordnet)

Das heißt 5 Personen werden auf 2 Zimmer verteilt. Dann gibt es ein Zimmer, das 3
Personen enthählt.

1. Fall: $B,C,D$ sind in Zimmer 1

1.1: $B,C,D$ kennen sich paarweise nicht. Das ist die Behauptung.

1.2: sonst: es gibt 2 die sich kennen $\obda$ seien das $B$ und $C$. Dann sind
$A,B,C$ 3 Personen, die sich paarweise kennen.

2. Fall: $B,C,D$ sind in Zimmer 2

2.1: $B,C,D$ kennen sich paarweise. Das ist die Behauptung.

2.2: sonst: es gibt zwei ($\obda B \textrm{ und } C$) die sich nicht kennen.
Dann bilden $A,B,C$ eine Menge von 3 Personen, die sich paarweise nicht kennen.

\emph{Frage}: gilt die Aussage auch für 5 Personen?

Nein: \help{Pentagram mit roten Kanten (Personen kennen sich) zw. AB,AC,ED,EC,BD
und blaue Kanten (Personen kennen sich nicht) zwischen AE,DC,BC,BE,AD}

\emph{Frage}: Welches ist die kleinste Zahl $R(n)$, so dass die folgende Aussage
wahr ist: Zu jeder Gruppe von $R(n)$ Personen gibt es stets eine Gruppe von $n$
Personen, die sich entweder paarweise kennen oder sich paarweise nicht kennen.

$R(n)$ bezeichnet die sogenannte \highl{Ramsay-Zahl}, das Beispiel zeigt
$R(3)=6$.

Umformulierung: In jedem vollständigen Graphen mit $R(n)$ Knoten dessen Kanten
rot und blau gefärbt sind, gibt es stets eine "`einfarbige Clique"'.

\help{vollständiger Graph mit den Knoten A,B,C,D,E,F rot und blau gefärbten
Kanten (rot=AB,AC,AD,AE,BD,CD,CE,DF) (blau=AF,BC,BE,BF,CF,DE,EF)}

Beweisen Sie: Bei jeder Verteilung von 1600 Bananen an 100 Affen gibt es 4
Affen, die dieselbe Anzahl von Bananen erhalten.

Wir betrachten folgende Verteilung:

\begin{gather*}
a_1^{'} = a_2^{'} = a_3^{'} = 0\\
a_4^{'} = a_5^{'} = a_6^{'} = 1\\
\vdots\\
a_{3\, i+1}^{'} = a_{3\,i+2} = a_{3\,i+3} = i\\
\vdots\\
a_{97} = a_{98} = a_{99} = 32\\
a_{100} = 33
\end{gather*}

indirekt: Angenommen $(a_{1},\ldots,a_{100})$ ist eine Verteilung bei der keine 4
Affen die gleiche Bananenanzahl bekommen.

Dann gilt $\sum a_i \leq \sum a_i^{'} = 3(\sum_{i=1}^{32} i +33 = 1617$

Widerspruch zur Annahme, dass 1600 Bananen zur Verfügung stehen.

\help{jetzt gibt es einen Bruch, wer helfen kann, bitte hier einfügen.
Irgendwie fehlt mir das Bindeglied zwischen 21.06. und 23.06. denn so ergibt das
einfach keinen Sinn}

Jede Folge von $n^2 + 1$ positiven, verschiedenen Zahlen enthählt eine
Teilfolge der Länge $n+1$ die entweder monoton fallend oder steigend ist.

Die Folge sei gegeben durch:
\[ a_1,a_2,\ldots,a_{n^2+1} \]
Es gibt Indizes $i_1,i_2,\ldots,i_{n+1}$, wobei $1\leq i_1 < i_2 < \ldots <
i_{n+1} \leq n^2+1$ mit $a_{i_1} < a_{i_2} < \ldots < a_{i_{n+1}}$ oder $a_{i_1}
> a_{i_2} > \ldots > a_{i_{n+1}}$

Für jedes $a_i$ sei $w_i$ die maximale Länge einer bei $a_i$ startenden
Folge monoton wachsender Zahlen.

Fallunterscheidung:

1. Fall: Es gibt ein $i$ mit $w_i \geq n+1$, d.\,h. es gibt eine monton wachsende
Folge der Länge $n+1$

2. Fall: Für alle $i$ ist $w_i < n+1$\\
Wir definieren "`Schubfächer"':
\[ S_K \edefine \{ i\ |\ w_i = k\} \qquad \textrm{ für } k=1,\ldots,n \]
Also gibt es ein Schubfach, dass (min) $\lfloor \frac{(n^2+1)-1}{n}\rfloor +1 =
n+1$ Indizes enthält.

Diese seien $1\leq i_1 < i_2 < \ldots < i_j \leq n^2 +1$ wobei $j \geq n+1$

\underline{Behauptung}: Für die zugehörige Folge der Zahlen gilt:
\[ a_{i_1} > a_{i_2} > \ldots > a_{i_j} \]
warum ist $a_{i_k} < a_{i_{k+1}}$?

Angenommen es gilt: $a_{i_k} < a_{i_{k+1}}$!

Wissen: es gibt eine maximale Folge monoton wachsender Zahlen der Länge $l$, die
bei $a_{i_{k+1}}$ beginnt und ebenso für $a_{i_k}$

Das heißt es gibt für $a_{i_k}$ sogar eine monton wachsende Folge der Länge $(l+1)$!

\subsection{STIRLING-Zahlen 1.\,Ordnung}
$M = \{ a_1,a_2,\ldots,a_m\}$ sei eine $m$-Menge.

Für \highl{bijektive Abbildungen} $\pi\colon M \twoheadleftarrow\!\! \twoheadrightarrow M$ haben
wir folgende Schreibweise:
\begin{gather*}
  p =
     \begin{pmatrix}
       1& 2& \dotso & m\\
       \pi(1)& \pi(2)& \dotso & \pi(m)
     \end{pmatrix}
\end{gather*}

\begin{bsp}
$\pi = (\begin{smallmatrix}1& 2& 3& 4& 5\\4& 5& 3& 1& 2\end{smallmatrix})$ ist durch das Wort: $4\, 5\, 3\,
1\, 2$ eindeutig festgelegt.

Wir betrachten die Abbildung im Einzelnen:
\begin{gather*}
   1 \rightarrow 4 \rightarrow 1 \rightarrow \ldots\\
   2 \rightarrow 5 \rightarrow \ldots\\
   3 \rightarrow 3 \rightarrow 3 \rightarrow \ldots
\end{gather*}
Alle Elemente lassen sch in Klassen von Zyklen zerlegen:
\[ (1\, 4)(2\, 5)(3) \]
mit der Gesamtlänge von $m\colon\quad 2+2+1=5$.
\end{bsp}
Wir halten fest:
\begin{enumerate}
   \item Für die Charakterisierung von $\pi$ ist die Reihenfolge der Zyklen
   unwesentlich
   \item In jedem Zyklus kann jedes Element an erster Position stehen (damit ist
   der Rest festgelegt)
\end{enumerate}

\begin{defini}
$S_{m,n}\ (1\leq n \leq m)$ bezeichnet die die Anzahl der Zerlegungen von
Permutationen von $m$ Elementen (m-Permutationen) in $n$ Zyklen und heißt
\highl{Stirling-Zahl, erster Art}.
\end{defini}

wir ergänzen: 
\begin{gather*}
   S_{m,0} \edefine 0 \qquad \textrm{für } m > 0\\
   S_{0,0} \edefine 1
\end{gather*}
spezielle Werte:
\begin{gather*}
   S_{m,m} = 1\\
   S_{m,m-1} = \binom{m}{2}\\
   S_{m,1} = (m-1)!
\end{gather*}
Außerdem gilt:
\[ \sum_{n=0}^m S_{m,n} = m! \]

\emph{Aufgabe}: Suche eine Rekursionsbeziehung!

Ansatz: wir klassifizieren nach einem fixierten Element $a\in M$: danach ob $a$
einem Zyklus für sich allein bildet oder nicht.

1.\,Sorte: $a$ ist Fixpunkt: die verbleibenden $m-1$ Elemente müssen auf $(n-1)$
Zyklen verteilt werden; dafür gibt es $S_{m-1,n-1}$ Möglichkeiten

2.\,Sorte: $a$ ist kein Fixpunkt: die verbleibenden $m-1$ Elemente müssen auf $n$
Zyklen verteilt werden ($S_{m-1,n}$ Mögl.)\\
Hieraus wird eine $m$-Permutation, indem $a$ innerhalb der vorhandenen Zyklen
vor eines der $(m-1)$ Elemente geschrieben wird: also $m-1$ Mögl. für $a$,
insgesamt also
\[ (m-1)\, S_{m-1,n} \]
Möglichkeiten.

Dann gilt:
\begin{satz}[Rekursion für Stirlingzahlen 1.\,Art]
\[ S_{m,n} = S_{m-1,n-1} + (m-1)\, S_{m-1,n} \]
Dies liefert ein Dreieck der Stirlingzahlen 1.\,Art.

\help{ein typisches Pascaldreieck mit Stirlingzahlen halt\dots}
\end{satz}

\section{Erzeugende Funktionen und Rekurrenzen}

Ausgangspunkt: Spezialfall des Binomischen Satzes
\[ (1+X)^n = \sum_{r=0}^n \binom{n}{r}\cdot x^r \]
rechte Seite: Polynom dessen Koeffizienten gerade die Binomialkoeffizienten
sind: \[ C(n,r) = \binom{n}{r} \]

linke Seite: $(1+x)^n$ enthält kombinatorische Informationen für das
Abzählproblem: Bestimme die r-Kombinationen einer $n$-Menge (ohne Wiederholung).

\begin{defini}
Eine Funktion \[ f(x) = \sum_{r=0}^k a_r\, x^r \] heißt erzeugende Funktion für
die Koeff. $a_r$. Falls die Zahlen $a_r$ Zählkoeff. eines Abzählproblems sind,
dann heißt $f$ erzeugende Funktion dieses Problems.
\end{defini}

\begin{bsp}
$f(x) = (1+x)^n$ ist also erzeugende Funktion des Abzählproblems
"`$r$-Kombinationen (ohne Wiederholung) aus $n$-Menge"'.

Interpretation: Jeder Term $(1+x)$ wird aufgefasst als ein Schubfach; wir haben
$n$ unterscheidbare Schubfächer, auf die $r$ identische Gegenstände zu verteilen
sind. (wobei jedes Fach höchstens einen Gegenstand enthält)

Dabei entspricht die Zuordnung 
\begin{itemize}
   \item 1 Gegenstand für das Fach - der Auswahl von $x$ beim Ausmultiplizieren
   und
   \item 0 Gegenstände für das Fach - der Auswahl von 1 beim Ausmultiplizieren
\end{itemize}
\end{bsp}

Ansatz: Die Erweiterung "`höchstens zwei Gegenstände pro Fach"' wird durch den
Term \[ x^2 + x + 1 \] repräsentiert:\\
"`2 Gegenstände"' bedeutet: "`wähle $x^2$ beim Ausmultiplizieren"'

\begin{bsp}
Ein konkretes Problem sei gegeben durch:

\begin{tabular}{c c c}
Fach & erlaubte Anzahlen & Term\\
\hline
Fach 1 & 0, 1, 3 & $x^3 + x + 1$\\
Fach 2 & 1, 2 & $x^2 + x$\\
Fach 3 & 1 & $x$\\
Fach 4 & 0, 4 & $x^4 + 1$
\end{tabular}

Die erzeugende Funktion für dieses spezielle Abzählproblem ist gegeben durch:
\[ f(x) = (x^3 + x + 1)\,(x^2 + x)\,(x)\,(x^4 + 1) \]
Durch Ausmultiplizieren ergibt sich folgendes Polynom:
\[ f(x) = 1\cdot x^2 + 2\cdot x^3 + 1\cdot x^5 + 2\cdot x^6 + 2\cdot x^7 + x^8 +
2\cdot x^9 + 1\cdot x^8 \]
Das heißt es gibt 
\begin{itemize}
   \item 0 Möglichkeiten 0, 1, 11 oder mehr Gegenstände zu verteilen
   \item 1 Möglichkeit 2, 4, 5, 8, 10 Gegenstände zu verteilen
   \item 2 Möglichkeiten 3, 6, 7 oder 9 Gegenstände zu verteilen
\end{itemize}

Die Lösung dieses Zählproblems ergibt sich durch "`rein mechanisches"'
Ausmultiplizieren.
\end{bsp}

Verallgemeinerung: Gegeben sei ein Abzählproblem bei dem identische Gegenstände
auf $n$ unterscheidbare Schubfächer zu verteilen sind.

Die zulässigen Anzahlen für das Schubfach $i$ sei gegeben durch $0 \leq V_{i_1}
< V_{i_2} < \ldots < V_{i_{j_i}}$

Wir identifizieren dieses Fach $i$ mit dem Term
\[ (x^{V_{i_1}} + x^{V_{i_2}} + \ldots + x^{V_{i_{j_i}}}) \]
und erhalten die erzeugende Funktion
\[ \prod_{i=1}^n (x^{V_{i_1}} + \ldots + x^{V_{i_{j_i}}}) \]

\begin{satz}
Die Koeffizienten des ausmultiplizierten Polynoms sind gerade die
Zählkoeffizienten dieses Abzählproblems.
\end{satz}

\emph{Frage}: Gibt es einen Ansatz für das Abzählproblem $r$-Kombinationen einer
$n$-Menge \underline{mit Wiederholung}?

Das heißt die erlaubten Anzahlen pro Fach sind: \[ 0, 1, 2, 3, \ldots \]

Ansatz: Wir identifizieren ein solches Fach mit dem "`Term"' $1 +x+x^2+\ldots$

Dies ist kein Term im eigentlichen Sinn, sondern eine \highl{Potenzreihe}
$\sum_{k=0}^\infty x^k$.

Die Analysis sagt: Die Reihe konvergiert für $|x| < 1$ und es gilt für solche
$x$:
\[ \sum_{k=0}^\infty x^k = \frac{1}{1-x} \]

Wir ignorieren das Konvergenzverhalten und definieren formal:
$(\frac{1}{1-x})^n$ ist \underline{die erzeugende Funktion} für das
Abzählproblem "`Bestimme die $r$-Kombination einer $n$-Menge mit Wiederholung."'

\begin{defini}
\[ f(x) = \sum_{k=0}^\infty a_k\,x^k \] heißt erzeugende Funktion für die Koeff.
$(a_k)_{k=0}^\infty$;

Falls die Zahlen $a_k$ Zählkoeff. sind, dann heißt $f$ erzeugende Funktion für
dieses Abzählproblem.
\end{defini}

\begin{satz}[aus der Analysis]
\[ \left(\frac{1}{1-x}\right)^n = \sum_{r=0}^\infty \binom{n+r-1}{r}\,x^r \]
Dies liefert: Die Zählkoeff. für das gegebene Abzählproblem sind
$\binom{n+r-1}{r}$.
\end{satz}

\subsection{Exkurs: Rechnen mit Potenzreihen}
\subsubsection{Rechenregeln}
\begin{gather}
a\cdot \sum_{k=0}^\infty u_k\, x^k + b\cdot \sum_{k=0}^\infty v_k\, x^k =
\sum_{k=0}^\infty (a\cdot u_k + b\cdot v_k)\cdot x^k\\
\left( \sum_{k=0}^\infty u_k\cdot x^k\right) \cdot \left( \sum_{k=0}^\infty
v_k\cdot x^k\right) = \sum_{k=0}^\infty w_k\cdot x^k\qquad w_k = \sum_{i=0}^k
u_i\cdot v_{k-i}\\
n(x) = \sum_{k=0}^\infty 0\cdot x^k = 0 \textrm{ ist neutrales Element bez.
Addition}\\
e(x) = \sum_{k=1}^\infty 0\cdot x^k +1 = 1 \textrm{ ist neutrales Element bez.
Multiplikation}
\end{gather}
und

Für eine Reihe \[ g(x) = \sum_{k=0}^\infty u_k\cdot x^k \] existiert ein Inverses
\[ h(x) = \sum_{k=0}^\infty v_k\cdot x^k \]
so dass \[ g(x)\cdot h(x) = 1 \textrm{, falls } u_o \neq 1 \]

Eine Verallgemeinerung wird dadurch erreicht, in dem für jedes Fach eine bel.
Folge $(n_0,n_1,n_2,\ldots)$ von erlaubten Anzahlen zugelassen wird.

Dann ist z.\,B. auch $(v_{i_1},v_{i_2},\ldots,v_{i_{j_i}},0,0,\ldots)$ eine solche
unendliche Folge.

\begin{bsp}["`Jedes Fach soll min. einen Gegenstand enthalten"']
Ansatz: "`Term"' $x+x^2+\ldots$

Potenzreihe:
\[ \sum_{k=1}^\infty x^k = \sum_{k^{'}=0}^\infty x^{k^{'}+1} = \sum_{k=0}^\infty
x^{k+1} \]
mit dem Index $k^{'}=k-1$ ($k=k^{'}+1$), also
\begin{align*}
= & x\cdot \sum_{k=0}^\infty x^k = x\, \left(\frac{1}{1-x}\right) =
\frac{x}{1-x}\\
= & \sum_{k-n=0}^\infty \binom{k-1}{k-n}\, x^k\\
= & \sum_{k=n}^\infty \binom{k-1}{k-n}\, x^k && \text{(Symetrie)}\\
= & \sum_{k=n}^\infty \binom{k-1}{n-1}\, x^k
\end{align*}

Die Koeff. $\binom{k-1}{n-1}$ sind gerade die Zählkoeff. für unser Abzählproblem
und es gilt:\\
dies entspricht der $n$-Partition von $k$.
\end{bsp}

\subsection{Rekurrenzen - am Beispiel der FIBONACCI-Zahlen}
\subsubsection{Rekursionsschema}
\begin{align}\label{fibo}
u_0 &= 0\, ,\ u_1 = 1\\
u_n &= u_{n-1} + u_{n-2} && (n\geq 2)
\end{align}

Dieses Schema liefert folgende Werte:
\begin{tabular}{c | l l l l l l l l l l l}
n     & 0 & 1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10\\
$u_n$ & 0 & 1 & 1 & 2 & 3 & 5 & 8 & 13 & 21 & 34 & 55
\end{tabular}

\underline{Anliegen}: Bestimme eine explizite Formel für die Werte $u_n$, d.\,h.
$u_n$ bekommt eine Darstellung von $n$ (aber \emph{nicht} von den
Vorgängerwerten). 

Das obige Schema ist ein lineares und homogenes Rekursionsschema mit konstanten
Koeffizienten. Zur Realisierung des Anliegens geben wir ein prinzipielles
Verfahren, dass sich auf weitere Bsp. übertragen lässt.

Das Verfahren vollzieht sich in den folgenden Schritten:

\underline{1. Schritt}: Stelle das \hyperref[fibo]{Schema \ref*{fibo}} durch eine einzige
Gleichung dar!

Dazu setzen wir: $u_n := 0$ für $n<0$

Damit gilt auch für $n=0\,\colon\ u_n = u_{n-1} + u_{n-2}$\\
aber für $n=1\,\colon\ u_n = u_{n-1} + u_{n-2} + 1$\\
und für $n>1\,\colon\ u_n = u_{n-1} + u_{n-2}$

Dies schreiben als:
\begin{gather}\label{fibo2}
u_n = u_{n-1} + u_{n-2} + \text{Wert-I}_a^n(\text{"`}n=1\text{"'})
\end{gather}
\underline{2. Schritt}: Bestimme mit Hilfe formaler Potenzreihen eine erzeugende
Funktion für \hyperref[fibo2]{Schema \ref*{fibo2}}!

\underline{1. Ansatz}:
\[ g(x) := \sum_{n=0}^\infty u_n\, x^n \]
Wegen \autoref{fibo2} gilt:
\begin{align*}
g(x) &= \sum_{n=0}^\infty u_n\, x^n = \sum_{n=0}^\infty \left(u_{n-1} + u_{n-2} +
\text{Wert-I}_a^n(\text{"`$n=1$"'})\right)\, x^n\\
 &= \sum_{n=0}^\infty u_{n-1}\, x^n + \sum_{n=0}^\infty u_{n-2}\,x^n + \sum
 \text{Wert-I}_a^n(\text{"`$n=1$"'})\cdot x^n\\
 &= x\cdot \sum_{n=1}^\infty u_{n-1}\cdot x^{n-1} + x^2\cdot \sum_{n=2}^\infty
 u_{n-2}\, x^{n-2} + x\\
 &= x\cdot \sum_{n^{'}=0}^\infty u_{n^{'}}\cdot x^{n^{'}=0} + x^2 \cdot
 \sum_{n^{''}=0}^\infty u_{n^{''}}\, x^{n^{''}} + x\\
 &= x\cdot g(x) + x^2\cdot g(x) + x
\end{align*}

wir haben: 
\begin{align*}
g(x) &= x\cdot g(x) + x^2\cdot g(x) + x\\
x &= g(x)[x + x^2-1]\\
\end{align*}
und damit:
\begin{gather}\label{fibo3}
g(x) = \frac{-x}{x^2 + x -1}
\end{gather}
$g(x)$ ist die erzeugende Funktion für das \hyperref[fibo2]{Schema \ref*{fibo2}}

\underline{3. Schritt}: Entwickle die rechte Seite von \autoref{fibo3} in eine
formale Potenzreihe und bestimme deren Koeff.!
(Aufgrund des 1. Ansatzes sind die gerade die gesuchten $u_n$!)

Dies geschieht in mehreren Teilschritten:\\
$g(x)$ besitzt die Darstellung als rationale Funktion, d.\,h. ist von der Form

\underline{2. Ansatz}: $g(x)= \frac{p(x)}{q(x)}$, dabei ist $p(x)$ das
\emph{Zählerpolynom} und $q(x)$ das \emph{Nennerpolynom}.

\underline{Schritt 3.1}: Bestimme die Nullstellen des Nennerpolynoms:
\[ q(x) = x^2 + x -1 \]
Die Lsg. sind
\begin{gather}
\alpha = -1/2 + \sqrt{(1/2)^2 +1} = \frac{-1 +\sqrt{5}}{2}\\
\beta = -1/2 - \sqrt{(1/2)^2 + 1} = \frac{-1 - \sqrt{5}}{2}
\end{gather}
und es gilt:
\begin{gather}
q(x) = (x-\alpha)\,(x-\beta) = (x + \frac{1-\sqrt{5}}{2})\,(x + \frac{1 +
\sqrt{5}}{2})
\end{gather}

\underline{Schritt 3.2}: Realisiere gemäß des 2. Ansatzes eine Darstellung von
$g(x)$ durch Partialbruchzerlegung.
\begin{gather}\label{fibo4}
g(x) = \frac{p(x)}{q(x)} = \frac{p(x)}{(x-\alpha)\,(x-\beta)} \stackrel{!}{=}
\frac{A}{(x-\alpha)} + \frac{B}{(x-\beta)}
\end{gather}

\underline{3. Ansatz}:\\
\underline{Schritt 3.3}: Bestimme die Koeff. $A$ und $B$!

\underline{Schritt 3.4}: Bestimme die gesuchten Koeff. $u_n$ (gemäß Ansatz 1)
durch Einsetzen in die formale Potenzreihe.

Denn es gilt: $g(x) = \frac{A}{x-\alpha} + \frac{B}{x-\beta}$\\
Erweitern wir den 1. Bruch mit $-1/\alpha$, den 2. Bruch mit $-1/\beta$

Damit gilt:
\begin{align*}
g(x) &= \frac{(-1/\alpha)\cdot A}{(-1/\alpha)\cdot (x-\alpha)} +
\frac{(-1/\beta) \cdot B}{(-1/\beta)\cdot (x-\beta)}\\
 &= \left(-1/\alpha\right)\, A \cdot \frac{1}{1-(1/\alpha)\cdot x} +
 \left(-1/\beta\right) \cdot B\cdot \frac{1}{1-(1/\beta)\cdot x}\\
 &= -A/\alpha \cdot \sum_{n=0}^\infty \left(\frac{1}{\alpha}\right)^n\, x^n -
 B/\beta \cdot \sum_{n=0}^\infty \left( \frac{1}{\beta}\right)^n\, x^n\\
 &= \sum_{n=0}^\infty \left[ -\frac{A}{\alpha^{n+1}} - \frac{B}{\beta^{n+1}}
 \right]\, x^n
\end{align*}

Damit gilt:
\begin{gather}\label{fibo5}
u_n = -\frac{A}{\alpha^{n+1}} - \frac{B}{\beta^{n+1}}
\end{gather}

Nun \underline{Schritt 3.3} (wir starten mit \autoref{fibo4})
\begin{align*}
g(x) &= \frac{p(x)}{(x-\alpha)\,(x-\beta)} = \frac{-x}{\left(x +
\frac{1-\sqrt{5}}{2} \right)\, \left( x + \frac{1+\sqrt{5}}{2} \right) }
\stackrel{!}{=} \frac{A}{ \left( x + \frac{1-\sqrt{5}}{2} \right) } + \frac{B}{
  \left( x + \frac{1-\sqrt{5}}{2} \right) }\\ 
&= \frac{A\, \left( x + \frac{1+\sqrt{5}}{2} \right) + B\, \left( x+
\frac{1-\sqrt{5}}{2} \right) }{ \left( x + \frac{1-\sqrt{5}}{2} \right) \,
\left( x + \frac{1+\sqrt{5}}{2} \right) }\\
&= \frac{ (A+B)\, x + A\, \left( \frac{1+\sqrt{5}}{2} \right) + B\, \left(
\frac{1-\sqrt{5}}{2} \right) }{ \left( x + \frac{1-\sqrt{5}}{2} \right)\, \left(
x+ \frac{1+\sqrt{5}}{2} \right) }
\end{align*}

Ein Koeff.vergleich liefert:
\begin{gather}
\label{fibo6.1} A+B = -1\\
\label{fibo6.2} A\,\left(\frac{1+\sqrt{5}}{2}\right) +
B\,\left(\frac{1-\sqrt{5}}{2}\right) = 0
\end{gather}
\autoref{fibo6.1} ergibt: $A= -1 -B$, einsetzen in \autoref{fibo6.2}:

\begin{align*}
(-1 - B)\,(\frac{1+\sqrt{5}}{2}) + B(\frac{1-\sqrt{5}}{2}) &= 0\\
-\frac{1+\sqrt{5}}{2} - B \cdot \frac{1+\sqrt{5}}{2} + B\, \frac{1-\sqrt{5}}{2}
&=0\\
B\,\left[ -1/2 - \sqrt{5}/2 + 1/2 - \sqrt{5}/2\right] &= 1/2 + \sqrt{5}/2\\
B\,(-\sqrt{5}) &= \frac{1+\sqrt{5}}{2}\\
B &= -1/\sqrt{5} \cdot \frac{1+\sqrt{5}}{2}
\end{align*}

haben: $B = -1/\sqrt{5} \cdot \frac{1+\sqrt{5}}{2}$ in \autoref{fibo6.1} liefert:
\begin{gather}\label{fibo7}
A=\frac{1}{\sqrt{5}} \cdot \frac{1-\sqrt{5}}{2}
\end{gather}
Um \autoref{fibo5} darstellen zu können, benutzen wir noch folgende Beziehungen:

haben: $\alpha = \frac{-1 + \sqrt{5}}{2} = -\frac{1-\sqrt{5}}{2}$. Dann ist
\[ \frac{1}{\alpha} = \frac{-2}{1-\sqrt{5}} = \frac{-2\, (1+\sqrt{5}}{
  (1+\sqrt{5})\, (1-\sqrt{5})} = \frac{-2\,(1 + \sqrt{5})}{-4} =
  \frac{1+\sqrt{5}}{2} = -\beta \]
entsprechend liefert
\[ \beta = \frac{-1 - \sqrt{5}}{2} = -\frac{1+\sqrt{5}}{2} \text{ für }
\frac{1}{\beta} = -\alpha \]

Dies setzen wir in \autoref{fibo5} ein:
\begin{align*} 
u_n =& -\left(\frac{1}{\sqrt{5}}\cdot \frac{1-\sqrt{5}}{2} \right) \left(
\frac{1+\sqrt{5}}{2} \right) \left( \frac{1+\sqrt{5}}{2} \right)^n\\ 
&+ \left( \frac{1}{\sqrt{5}}\cdot \frac{1+\sqrt{5}}{2} \right) \left(
\frac{1-\sqrt{5}}{2} \right) \left( \frac{1-\sqrt{5}}{2} \right)^n 
\end{align*}

\begin{gather}
u_n = \frac{1}{\sqrt{5}}\cdot \left( \frac{1 + \sqrt{5}}{2} \right)^n -
\frac{1}{\sqrt{5}}\cdot \left( \frac{1 - \sqrt{5}}{2} \right)^n
\end{gather}

\chapter{Einblicke in die Zahlentheorie}
\section{Natürliche Zahlen}
Beschreibung als Mengen:

Rekursionsschema:
\begin{gather*}
0 := \varnothing\\
n+1 := n \cup \{n\}
\end{gather*}

\begin{bsp}
\begin{gather*}
1 = \varnothing \cup \{\varnothing\} = \{\varnothing\} = \{0\}\\
2 = \{\varnothing\} \cup \left\{\left\{\varnothing\right\}\right\} =
\left\{\varnothing,\left\{\varnothing\right\}\right\} = \{0,1\}
\end{gather*}
\end{bsp}

Prädikatenlogische Beschreibung

\subsection{PEANA-Axiome}
Struktur:
\begin{tabular}[t]{l l}
$\N$ & sei die Menge der natürlichen Zahlen\\
0 & Null\\
$n+1$ & Nachfolger
\end{tabular}

\begin{gather}
\forall_{n\in \N} (n+1 \ne 0)\\
\forall_{n\in \N} \forall_{m in \N} (n+1 = m+1 \rightarrow n=m) \qquad
\text{Eindeutigkeit}\\
\forall_{M\in \N} \left( 0 \in M \wedge \forall_{n\in N}\left( n\in M
\rightarrow n+1 \in M\right) \rightarrow M = \N\right)
\end{gather}

\emph{Frage}: Wieso gilt in der Struktur $[\N,0,+1]$ das Induktionsprinzip?

Dazu definieren wir:
\[ n \leq m \define n=m \vee n \in m \qquad \text{Quasielementbeziehung} \]

Eigenschaften:
\begin{enumerate}
   \item ist reflexiv
   \item ist transitiv
   \item ist antisymetrisch
   \item ist linear
   \item jede nichtleere Teilmenge besitzt ein kleinstes Element
\end{enumerate}

1) bis 3) charakterisieren $\leq$ als Halbordnungsrelation.\\
1) bis 4) charakterisieren $\leq$ als Ordnungsrelation.\\
1) bis 3) + 5) charakterisieren $\leq$ als Wohlordnungsrelation.

Für die wohlgeordnete Menge $[\N,\leq]$ gilt folgendes
\underline{Induktionsprinzip}:
\[ \forall_{M \in N} \left( \min N \in M \wedge \forall_{K\in N}\left( \min K
\in M \rightarrow \min(K\mminus \{\min K\} \in M\right) \rightarrow M = N
\right) \]

Rechenoperationen - mit Hilfe des Induktionsprinzips
\begin{satz}[Rekursionsschema für die Addition]
\begin{align*}
m + 0 &:= m\\
m + (n+1) &:= (m+n)+1
\end{align*}
\end{satz}

\begin{satz}[Rekursionsschema für die Multiplikation]
\begin{align*}
m \cdot 0 &:= 0\\
m\cdot (n+1) &:= m\cdot n +m
\end{align*}
\end{satz}

Damit gilt: $n\leq m \leftrightarrow \exists_{k\in \N} (n+k=m)$

$\leq$ ist damit durch die Addition charakterisiert!

\emph{Frage}: Was ist das multiplikative Analogon?
\[ n \backslash m \define \forall_{k\in \N} \left( n\cdot k =m\right) \qquad
\text{Teilerrelation} \]

\underline{Eigenschaften:}
\begin{itemize}
   \item $\backslash$ ist eine Halbordnungsrelation, d.\,h. $\left[ \N,\backslash
   \right]$ ist eine halbgeordnete Menge
   \item $1\backslash n$ für alle $n\in \N$, d.\,h. $1=\min_{\backslash} \N$
   \item $n \backslash 0$ für alle $n\in \N$, d.\,h. $0 = \max_{\backslash} \N$
   ($0= \min_{\leq} \N$)
   \item $n\backslash x \wedge n\backslash y \rightarrow n\backslash a\,x+b\,y$:
   n ist gemeinsamer Teiler von $x$ und $y$
   \item $n\backslash x \wedge m\backslash y \rightarrow n\cdot m\backslash
   x\,y$
   \item $n\backslash m \wedge m+0 \rightarrow n\leq m$
\end{itemize}

\subsubsection{Eigenschaften der Differenz}
Falls $m\leq n$, dann ex. $k\in \N$ mit $m+k=n$. $k$ heißt \highl{Differenz}
zwischen $m$ und $n$.

Schreibweise: $n - m := k$

Rechenregeln: z.\,B.
\begin{itemize}
   \item $a\cdot (n-m) = a\,n - a\,m$
   \item falls $n\backslash x$ und $n\backslash y$ und $b\,y \leq a\,x$, dann
   $n\backslash (a\,x-b\,y)$
\end{itemize}

\emph{Frage}: Was ist eine "`eingeschränkte Division"'?

\begin{lemma} Für je zwei natürliche Zahlen $n$ und $m$ mit $m \leq n$ gibt es
zwei eindeutig bestimmte Zahlen $q$ und $r$, so dass gilt:
\[ n = q\cdot m +r \qquad \text{ und } \qquad 0 \leq r < m \]

Schreibweise: 
\begin{gather*}n \text{ div } m := q\\ n \mod m := r\end{gather*}

Dies ist die Definition zweier zweistelliger Funktionen "`div"' und "`mod"'.

Falls $n \mod m =0$, dann $m\backslash n$ und wir setzen den (eingeschränkten)
Quotienten $\frac{n}{m} := q$

\emph{Verallgemeinerung}:
\[ 
	\lfloor \frac{n}{m} \rfloor := n \text{ div } m \text{ heißt ganzer Teil
	der Division}
\]
\begin{proof}[mithilfe des Wohlordnungsprinzips]
Wir definieren folgende Menge:
\[
	N := \{ n-k\cdot m\ |\ k \in \N \text{ und } k\cdot m \leq n\}
\]
Da $n\cdot m \in \N$, gilt $N \ne \varnothing$\\
Also ex. ein Minimum in $N$. Es sei $r = \min_{\leq} N$.

\begin{description}
	\item[1. Fall] $r<m$, $r\in \N$ bedeutet: es gibt ein $k\in \N$ mit
	$r=n-k\cdot m$, d.\,h. $n=k\cdot m +r$ und $0 \leq r < m$
	\item[2. Fall] $r\geq m$, d.\,h. es gibt $k\in \N$, s.d. $r=n-k\cdot m$.
	Damit $r-m = (n-k\cdot m)-m = n- (k+1)\cdot m \geq 0$\\
	Das heißt $r-m \in \N$ und $r-m < r$ \lightning $(r=\min N)$\\
	Der 2. Fall tritt nicht ein.
\end{description}

Dies beweist die Existenz von $q$ und $r$!\\
Es bleibt zu zeigen: Eindeutigkeit:

Es sei $n = q_1 m + r_1\qquad 0\leq r_1 < m$\\
und $n= q_2 m + r_2\qquad 0 \leq r_2 < m$\\
Also gilt: 
\begin{align*}
	0 &= q_1 m + r_1 - (q_2 m + r_2)\\
	  &= (q_1 - q_2) m + (r_1 - r_2)\\
	(r_2 - r_1) &= (q_1 - q_2) m
\end{align*}
Also $m\backslash (r_2-r_1)$, andererseits $0\leq r_2-r_1 < m$.\\
Also $r_2 - r_1 = 0\ \rightarrow r_2 = r_1$\\
Das heißt $(q_1-q_2)\cdot m = 0\ \rightarrow q_1 - q_2 = 0\ \rightarrow q_1 = q_2$
\end{proof}
\end{lemma}

\subsubsection{m-adische Darstellung der natürlichen Zahlen}
\begin{defini}
Für ein finites $m\geq 2$ ist die $m$-adische Darstellung einer nat. Zahl $n$
gegeben durch
\begin{align*}
	n &= (a_{k-1} a_{k-2} \dots a_1 a_0)_m\\
	n &= a_{k-1} m^{k-1} + a_{k-2} m^{k-2} + \dots + a_1 m + a_0\\
	n &=\left(\dots \left(\left( a_{k-1} m + a_{k-2}\right)m +
	a_{k-3}\right) \dots + a_1\right) m + a_0 && \text{HORNER-Schema}
\end{align*}
und $0\leq a_0,a_1,a_2,\dots,a_{k-2},a_{k-1} < m$. $a_i$ sind die
\highl{Ziffern} im $m$-adischen System.
\end{defini}

\begin{satz}[Rechtfertigung der m-adischen Darstellung]
Jede nat. Zahl $n$ besitzt eine eindeutig bestimmte Darstellung der obigen Form.
\begin{proof} mit Hilfe von Lemma 1 \end{proof}
\end{satz}

\subsection{Größter gemeinsamer Teiler}
Wir betrachten: $[ \N,\backslash]$ ist eine halbgeordnete Menge mit den
Eigenschaften
\begin{gather*}
	1\backslash n,\quad n\backslash 0\\
	1 = \min_{\backslash} \N,\quad 0 = \max_{\backslash} \N
\end{gather*}
wissen: $d\backslash n$ und $d\backslash m\ \rightarrow d\backslash (a n + b m)$
und $d\backslash (a n + b m)$, falls $a n \geq b m$

\begin{defini}
Es seien $m,n \in \N$.
$g$ heißt größter gemeinsamer Teiler von $n$ und $m \define$
\begin{enumerate}
	\item $g\backslash n$ und $g\backslash m$
	\item $\forall d \left( \left( d\backslash n \wedge d\backslash m\right)
	\rightarrow d\backslash g\right)$
\end{enumerate}
Eigenschaft 1 bedeutet: $g$ ist untere Schranke von $\{n,m\}$.\\
Eigenschaft 1 mit 2 bedeutet: $g$ ist größte untere Schranke von $\{n,m\}$

Schreibweise:
\[
	g = \ggT(n,m)
\]
\end{defini}

\begin{satz}
Für je zwei natürliche Zahlen ex. der größte gemeinsame Teiler (und ist
eindeutig bestimmt)
\begin{proof}
$\ggT(0,0)=0,\ \ggT(n,0)=n,\ \ggT(0,m)=m$\\
Es seien $n\geq m > 0$. Wir definieren
\begin{align*}
	D =& \{a n - b m\ |\ a,b \in \N \wedge a n \geq b m\}\\
	   &\cup \{a m - b n\ |\ a,b \in \N \wedge a m \geq b n\}
\end{align*}
Eigenschaften:
\begin{enumerate}
	\item $o, n, m \in D$
	\item Falls $d\backslash n$ und $d\backslash m$, dann gilt $d\backslash
	c$ für alle $c\in D$
\end{enumerate}
Daraus folgt: $D \mminus \{0\} \ne \varnothing$\\
Also ex. ein Minimum in $D\mminus \{0\}$\\
Es sei $g = \min_{\leq}(D\mminus \{0\})$

Behauptung: $g \stackrel{!}{=} \ggT(n,m)$\\
\underline{zunächst}: $g$ ist Teiler von $n$! Da $g \in D\mminus \{0\}$, also gilt entweder
$g= a n - b m$ oder $g= a m - b n$.\\
Außerdem gilt: $g \leq n$ (wegen Eigenschaft 1)

Wegen Lemma 1 gibt es $q,r$ mit $n=q\cdot g + r$ und $0\leq r < g$.\\
Also gilt: $r = n - q\cdot g$.

Angenommen es gilt $g= a n - b m$:\\
Dann ist 
\begin{align*}
	r&=n-q(a n - b m) \geq 0\\
	 &=q b m - (q a -1)n
\end{align*}

Das heißt $r\in D$, da $r<g$ und $g= \min_{\leq}(D\mminus\{0\})$.\\
Hieraus folgt: $r=0$!

Also gilt (in Lemma 1): $n=q g$, d.\,h. $g\backslash n$

Angenommen es gilt $g = a m - b n$:\\
Damit ist $r = n-q(a m - b n) = (q b +1)n - (q a)m$\\
Also wieder $r\in D$ und damit $r=0$! Also auch $g\backslash n$.

\underline{Analog}: $g$ ist ein Teiler von $m$!

Bleibt zu zeigen: $g$ ist ein Infimum von $\{n,m\}$ bezüglich $\backslash$.\\
Dies folgt sofort aus Eigenschaft 2 von $D$.
\end{proof}
\end{satz}
\underline{Folgerung}: Der $\ggT(n,m)$ lässt sich schreiben als Linearkombination
$g=a\cdot n - b\cdot m$ oder $g = a\cdot m - b\cdot n$.

Dies lässt sich für \emph{ganze} Zahlen $A$ und $B$ schreiben als
\[
	g = A n + B m
\]
wobei $\sgn(A) \ne \sgn(B)$

\clearpage
\pdfbookmark[0]{Index}{index}
\printindex

\end{document}
